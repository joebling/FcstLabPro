# 实验报告: weekly_bear_v19_volatility_20260215_151801_c938ff

**生成时间**: 2026-02-15 15:19:16

## 1. 实验概要

| 项目 | 值 |
|------|------|
| 实验名称 | weekly_bear_v19_volatility |
| 描述 | Bear v19: T=28 + FGI + Bear波动率特征 (无Regime) |
| 标签 | ['weekly', 'bear', 'binary', 'v19', 'volatility'] |
| Git Commit | 007d62a |
| Git Branch | main |
| 耗时 | Nones |
| 随机种子 | 42 |

## 2. 数据配置

- **数据源**: binance
- **交易对**: BTCUSDT
- **周期**: 1d
- **时间范围**: 2018-01-01 ~ 2025-12-31
- **数据文件**: `data/raw/btc_binance_BTCUSDT_1d.csv`

## 3. 特征配置

- **特征集**: ['technical', 'volume', 'flow', 'market_structure', 'external_fgi', 'bear_volatility']
- **总特征数**: 154
- **NaN处理**: ffill_then_drop

## 4. 标签配置

- **策略**: reversal
- **窗口 T**: 28 天
- **阈值 X**: 0.05 (5%)

## 5. 模型配置

- **类型**: lightgbm
- **参数**:
  - n_estimators: 500
  - max_depth: 6
  - learning_rate: 0.05
  - num_leaves: 31
  - subsample: 0.8
  - colsample_bytree: 0.8
  - min_child_samples: 20
  - reg_alpha: 0.1
  - reg_lambda: 0.1
  - random_state: 42
  - verbose: -1
  - auto_scale_pos_weight: True

## 6. 评估结果（汇总）

| 指标               |      值 |
|:-----------------|-------:|
| accuracy         | 0.5578 |
| f1_binary        | 0.3377 |
| precision_binary | 0.3121 |
| recall_binary    | 0.3679 |
| f1_macro         | 0.5029 |
| cohen_kappa      | 0.0092 |

## 7. Walk-Forward Fold 详情

- **方法**: walk_forward
- **初始训练集**: 1500
- **OOS窗口**: 63
- **步进**: 21
- **总 Fold 数**: 49

|   fold_id |   train_size |   test_size |   accuracy |   f1_binary |   precision_binary |   recall_binary |   f1_macro |   cohen_kappa |
|----------:|-------------:|------------:|-----------:|------------:|-------------------:|----------------:|-----------:|--------------:|
|    0.0000 |    1500.0000 |     63.0000 |     0.6984 |      0.0952 |             0.0556 |          0.3333 |     0.4571 |        0.0148 |
|    1.0000 |    1521.0000 |     63.0000 |     0.7143 |      0.0000 |             0.0000 |          0.0000 |     0.4167 |        0.0000 |
|    2.0000 |    1542.0000 |     63.0000 |     0.4603 |      0.0000 |             0.0000 |          0.0000 |     0.3152 |        0.0000 |
|    3.0000 |    1563.0000 |     63.0000 |     0.5238 |      0.1667 |             0.7500 |          0.0938 |     0.4167 |        0.0606 |
|    4.0000 |    1584.0000 |     63.0000 |     0.5397 |      0.2564 |             0.2381 |          0.2778 |     0.4615 |       -0.0741 |
|    5.0000 |    1605.0000 |     63.0000 |     0.1587 |      0.2740 |             0.1587 |          1.0000 |     0.1370 |        0.0000 |
|    6.0000 |    1626.0000 |     63.0000 |     0.6190 |      0.6842 |             0.5778 |          0.8387 |     0.6021 |        0.2432 |
|    7.0000 |    1647.0000 |     63.0000 |     0.6349 |      0.6761 |             0.6316 |          0.7273 |     0.6289 |        0.2626 |
|    8.0000 |    1668.0000 |     63.0000 |     0.9524 |      0.9388 |             0.9583 |          0.9200 |     0.9499 |        0.8998 |
|    9.0000 |    1689.0000 |     63.0000 |     0.9365 |      0.5000 |             0.5000 |          0.5000 |     0.7331 |        0.4661 |
|   10.0000 |    1710.0000 |     63.0000 |     0.9683 |      0.0000 |             0.0000 |          0.0000 |     0.4919 |        0.0000 |
|   11.0000 |    1731.0000 |     63.0000 |     0.6825 |      0.0000 |             0.0000 |          0.0000 |     0.4057 |        0.0000 |
|   12.0000 |    1752.0000 |     63.0000 |     0.5238 |      0.2105 |             0.1212 |          0.8000 |     0.4348 |        0.0843 |
|   13.0000 |    1773.0000 |     63.0000 |     0.7460 |      0.4286 |             0.3000 |          0.7500 |     0.6327 |        0.3019 |
|   14.0000 |    1794.0000 |     63.0000 |     0.8095 |      0.1429 |             0.2500 |          0.1000 |     0.5179 |        0.0574 |
|   15.0000 |    1815.0000 |     63.0000 |     0.6190 |      0.0769 |             0.0476 |          0.2000 |     0.4185 |       -0.0588 |
|   16.0000 |    1836.0000 |     63.0000 |     0.5397 |      0.1714 |             0.0968 |          0.7500 |     0.4264 |        0.0664 |
|   17.0000 |    1857.0000 |     63.0000 |     0.5238 |      0.1667 |             0.1364 |          0.2143 |     0.4167 |       -0.1441 |
|   18.0000 |    1878.0000 |     63.0000 |     0.5873 |      0.5000 |             0.5200 |          0.4815 |     0.5743 |        0.1495 |
|   19.0000 |    1899.0000 |     63.0000 |     0.4444 |      0.5679 |             0.4107 |          0.9200 |     0.3951 |        0.0426 |
|   20.0000 |    1920.0000 |     63.0000 |     0.4127 |      0.5647 |             0.4068 |          0.9231 |     0.3311 |       -0.0192 |
|   21.0000 |    1941.0000 |     63.0000 |     0.5079 |      0.5753 |             0.5000 |          0.6774 |     0.4952 |        0.0211 |
|   22.0000 |    1962.0000 |     63.0000 |     0.5238 |      0.2105 |             0.6667 |          0.1250 |     0.4348 |        0.0597 |
|   23.0000 |    1983.0000 |     63.0000 |     0.6508 |      0.5217 |             1.0000 |          0.3529 |     0.6234 |        0.3343 |
|   24.0000 |    2004.0000 |     63.0000 |     0.6984 |      0.1739 |             1.0000 |          0.0952 |     0.4947 |        0.1231 |
|   25.0000 |    2025.0000 |     63.0000 |     0.7302 |      0.2609 |             1.0000 |          0.1500 |     0.5479 |        0.1941 |
|   26.0000 |    2046.0000 |     63.0000 |     0.5873 |      0.1333 |             0.0870 |          0.2857 |     0.4312 |       -0.0446 |
|   27.0000 |    2067.0000 |     63.0000 |     0.4444 |      0.1026 |             0.0541 |          1.0000 |     0.3501 |        0.0450 |
|   28.0000 |    2088.0000 |     63.0000 |     0.2698 |      0.0800 |             0.0417 |          1.0000 |     0.2374 |        0.0203 |
|   29.0000 |    2109.0000 |     63.0000 |     0.1270 |      0.0351 |             0.0179 |          1.0000 |     0.1190 |        0.0040 |
|   30.0000 |    2130.0000 |     63.0000 |     0.1746 |      0.2571 |             0.1475 |          1.0000 |     0.1643 |        0.0109 |
|   31.0000 |    2151.0000 |     63.0000 |     0.7302 |      0.0000 |             0.0000 |          0.0000 |     0.4220 |       -0.0593 |
|   32.0000 |    2172.0000 |     63.0000 |     0.4444 |      0.0000 |             0.0000 |          0.0000 |     0.3077 |        0.0000 |
|   33.0000 |    2193.0000 |     63.0000 |     0.3333 |      0.0000 |             0.0000 |          0.0000 |     0.2500 |        0.0000 |
|   34.0000 |    2214.0000 |     63.0000 |     0.2857 |      0.1818 |             1.0000 |          0.1000 |     0.2740 |        0.0438 |
|   35.0000 |    2235.0000 |     63.0000 |     0.6349 |      0.3429 |             1.0000 |          0.2069 |     0.5451 |        0.2197 |
|   36.0000 |    2256.0000 |     63.0000 |     0.7302 |      0.3200 |             0.3636 |          0.2857 |     0.5758 |        0.1547 |
|   37.0000 |    2277.0000 |     63.0000 |     0.5397 |      0.2927 |             0.1765 |          0.8571 |     0.4758 |        0.1329 |
|   38.0000 |    2298.0000 |     63.0000 |     0.6190 |      0.4286 |             0.2903 |          0.8182 |     0.5714 |        0.2301 |
|   39.0000 |    2319.0000 |     63.0000 |     0.3016 |      0.2903 |             0.1765 |          0.8182 |     0.3014 |        0.0043 |
|   40.0000 |    2340.0000 |     63.0000 |     0.2063 |      0.3421 |             0.2063 |          1.0000 |     0.1711 |        0.0000 |
|   41.0000 |    2361.0000 |     63.0000 |     0.5556 |      0.5882 |             0.4167 |          1.0000 |     0.5527 |        0.2538 |
|   42.0000 |    2382.0000 |     63.0000 |     0.6825 |      0.5238 |             0.5789 |          0.4783 |     0.6429 |        0.2889 |
|   43.0000 |    2403.0000 |     63.0000 |     0.7937 |      0.3810 |             0.5714 |          0.2857 |     0.6286 |        0.2733 |
|   44.0000 |    2424.0000 |     63.0000 |     0.6667 |      0.0000 |             0.0000 |          0.0000 |     0.4000 |       -0.0889 |
|   45.0000 |    2445.0000 |     63.0000 |     0.5079 |      0.2051 |             1.0000 |          0.1143 |     0.4244 |        0.1029 |
|   46.0000 |    2466.0000 |     63.0000 |     0.3016 |      0.1852 |             1.0000 |          0.1020 |     0.2870 |        0.0481 |
|   47.0000 |    2487.0000 |     63.0000 |     0.3651 |      0.1304 |             1.0000 |          0.0698 |     0.3152 |        0.0455 |
|   48.0000 |    2508.0000 |     63.0000 |     0.8254 |      0.7755 |             0.8261 |          0.7308 |     0.8163 |        0.6335 |

## 8. 分类报告

```
              precision    recall  f1-score   support

       负例(0)       0.70      0.64      0.67      2141
       正例(1)       0.31      0.37      0.34       946

    accuracy                           0.56      3087
   macro avg       0.50      0.50      0.50      3087
weighted avg       0.58      0.56      0.57      3087

```

## 9. 混淆矩阵

|       |   非跌(0) |   大跌(1) |
|:------|--------:|--------:|
| 非跌(0) |    1374 |     767 |
| 大跌(1) |     598 |     348 |

## 10. Top 20 重要特征

| feature                |   importance |
|:-----------------------|-------------:|
| vol_volatility_20      |          190 |
| sma_cross_50_200       |          183 |
| low_50d_dist           |          166 |
| trades_sma_20          |          158 |
| price_vs_sma_200       |          154 |
| ext_fgi_std_14         |          146 |
| bear_max_drawdown      |          141 |
| rsi_28                 |          140 |
| ema_5                  |          134 |
| obv_sma_20             |          130 |
| flow_momentum_20       |          128 |
| vol_volatility_10      |          127 |
| buy_pressure_ma_20     |          127 |
| bear_dist_from_ath     |          118 |
| bear_atr_28            |          115 |
| low_21d_dist           |          115 |
| cvd_change_21          |          112 |
| vol_price_corr_20      |          111 |
| bear_vol_weighted_rv_7 |          107 |
| flow_momentum_5        |          105 |

## 附录: 完整配置

```yaml
experiment:
  name: weekly_bear_v19_volatility
  description: 'Bear v19: T=28 + FGI + Bear波动率特征 (无Regime)'
  tags:
  - weekly
  - bear
  - binary
  - v19
  - volatility
  category: weekly
data:
  source: binance
  symbol: BTCUSDT
  interval: 1d
  start: '2018-01-01'
  end: '2025-12-31'
  path: data/raw/btc_binance_BTCUSDT_1d.csv
features:
  sets:
  - technical
  - volume
  - flow
  - market_structure
  - external_fgi
  - bear_volatility
  drop_na_method: ffill_then_drop
  scaling: null
label:
  strategy: reversal
  T: 28
  X: 0.05
  map:
    0: 1
    1: 0
    2: 0
model:
  type: lightgbm
  params:
    n_estimators: 500
    max_depth: 6
    learning_rate: 0.05
    num_leaves: 31
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    reg_alpha: 0.1
    reg_lambda: 0.1
    random_state: 42
    verbose: -1
    auto_scale_pos_weight: true
evaluation:
  method: walk_forward
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
  - accuracy
  - f1_binary
  - precision_binary
  - recall_binary
  - f1_macro
  - cohen_kappa
seed: 42

```