# 实验报告: weekly_bull_v6_20260213_214847_a29943

**生成时间**: 2026-02-13 21:50:36

## 1. 实验概要

| 项目 | 值 |
|------|------|
| 实验名称 | weekly_bull_v6 |
| 描述 | 综合最优版多头 v6：reversal T=14, SPW, 5特征集, 充分学习 |
| 标签 | ['weekly', 'bull', 'binary', 'v6', 'best'] |
| Git Commit | 85a1ee5 |
| Git Branch | main |
| 耗时 | Nones |
| 随机种子 | 42 |

## 2. 数据配置

- **数据源**: binance
- **交易对**: BTCUSDT
- **周期**: 1d
- **时间范围**: 2018-01-01 ~ 2025-12-31
- **数据文件**: `data/raw/btc_binance_BTCUSDT_1d.csv`

## 3. 特征配置

- **特征集**: ['technical', 'volume', 'flow', 'sentiment', 'market_structure']
- **总特征数**: 151
- **NaN处理**: ffill_then_drop

## 4. 标签配置

- **策略**: reversal
- **窗口 T**: 14 天
- **阈值 X**: 0.05 (5%)

## 5. 模型配置

- **类型**: lightgbm
- **参数**:
  - n_estimators: 1000
  - max_depth: 5
  - learning_rate: 0.05
  - num_leaves: 24
  - subsample: 0.8
  - colsample_bytree: 0.8
  - min_child_samples: 20
  - reg_alpha: 0.15
  - reg_lambda: 0.15
  - random_state: 42
  - verbose: -1
  - min_split_gain: 0.003
  - auto_scale_pos_weight: True

## 6. 评估结果（汇总）

| 指标               |      值 |
|:-----------------|-------:|
| accuracy         | 0.5313 |
| f1_binary        | 0.4541 |
| precision_binary | 0.504  |
| recall_binary    | 0.4132 |
| f1_macro         | 0.5218 |
| cohen_kappa      | 0.0505 |

## 7. Walk-Forward Fold 详情

- **方法**: walk_forward
- **初始训练集**: 1500
- **OOS窗口**: 63
- **步进**: 21
- **总 Fold 数**: 57

|   fold_id |   train_size |   test_size |   accuracy |   f1_binary |   precision_binary |   recall_binary |   f1_macro |   cohen_kappa |
|----------:|-------------:|------------:|-----------:|------------:|-------------------:|----------------:|-----------:|--------------:|
|    0.0000 |    1500.0000 |     63.0000 |     0.6667 |      0.6957 |             0.7500 |          0.6486 |     0.6636 |        0.3315 |
|    1.0000 |    1521.0000 |     63.0000 |     0.6984 |      0.6545 |             0.6429 |          0.6667 |     0.6935 |        0.3871 |
|    2.0000 |    1542.0000 |     63.0000 |     0.4603 |      0.3462 |             0.3333 |          0.3600 |     0.4433 |       -0.1121 |
|    3.0000 |    1563.0000 |     63.0000 |     0.4127 |      0.3729 |             0.2391 |          0.8462 |     0.4103 |        0.0754 |
|    4.0000 |    1584.0000 |     63.0000 |     0.4603 |      0.5750 |             0.4600 |          0.7667 |     0.4179 |       -0.0500 |
|    5.0000 |    1605.0000 |     63.0000 |     0.6032 |      0.5455 |             0.6000 |          0.5000 |     0.5967 |        0.1985 |
|    6.0000 |    1626.0000 |     63.0000 |     0.5556 |      0.3333 |             1.0000 |          0.2000 |     0.5000 |        0.1818 |
|    7.0000 |    1647.0000 |     63.0000 |     0.5556 |      0.2222 |             0.5714 |          0.1379 |     0.4556 |        0.0526 |
|    8.0000 |    1668.0000 |     63.0000 |     0.6825 |      0.6774 |             0.8077 |          0.5833 |     0.6825 |        0.3805 |
|    9.0000 |    1689.0000 |     63.0000 |     0.6032 |      0.5902 |             0.6429 |          0.5455 |     0.6028 |        0.2105 |
|   10.0000 |    1710.0000 |     63.0000 |     0.5079 |      0.3404 |             0.3200 |          0.3636 |     0.4740 |       -0.0494 |
|   11.0000 |    1731.0000 |     63.0000 |     0.5556 |      0.2632 |             0.2632 |          0.2632 |     0.4725 |       -0.0550 |
|   12.0000 |    1752.0000 |     63.0000 |     0.4603 |      0.3929 |             0.2973 |          0.5789 |     0.4536 |       -0.0094 |
|   13.0000 |    1773.0000 |     63.0000 |     0.6032 |      0.3243 |             0.2857 |          0.3750 |     0.5217 |        0.0506 |
|   14.0000 |    1794.0000 |     63.0000 |     0.8254 |      0.4211 |             0.3077 |          0.6667 |     0.6591 |        0.3343 |
|   15.0000 |    1815.0000 |     63.0000 |     0.7460 |      0.3333 |             0.3636 |          0.3077 |     0.5882 |        0.1778 |
|   16.0000 |    1836.0000 |     63.0000 |     0.6190 |      0.3333 |             0.5455 |          0.2400 |     0.5333 |        0.1199 |
|   17.0000 |    1857.0000 |     63.0000 |     0.4444 |      0.3396 |             0.6429 |          0.2308 |     0.4301 |        0.0187 |
|   18.0000 |    1878.0000 |     63.0000 |     0.3651 |      0.1667 |             1.0000 |          0.0909 |     0.3269 |        0.0569 |
|   19.0000 |    1899.0000 |     63.0000 |     0.3175 |      0.1887 |             1.0000 |          0.1042 |     0.2998 |        0.0525 |
|   20.0000 |    1920.0000 |     63.0000 |     0.3968 |      0.0952 |             1.0000 |          0.0500 |     0.3214 |        0.0370 |
|   21.0000 |    1941.0000 |     63.0000 |     0.3968 |      0.3667 |             0.4583 |          0.3056 |     0.3955 |       -0.1667 |
|   22.0000 |    1962.0000 |     63.0000 |     0.5238 |      0.6591 |             0.5179 |          0.9062 |     0.4348 |        0.0357 |
|   23.0000 |    1983.0000 |     63.0000 |     0.3651 |      0.4444 |             0.6154 |          0.3478 |     0.3519 |       -0.1754 |
|   24.0000 |    2004.0000 |     63.0000 |     0.3651 |      0.4595 |             0.6800 |          0.3469 |     0.3451 |       -0.1392 |
|   25.0000 |    2025.0000 |     63.0000 |     0.4127 |      0.3934 |             0.9231 |          0.2500 |     0.4121 |        0.1017 |
|   26.0000 |    2046.0000 |     63.0000 |     0.5238 |      0.2105 |             0.5000 |          0.1333 |     0.4348 |        0.0125 |
|   27.0000 |    2067.0000 |     63.0000 |     0.5079 |      0.0606 |             0.3333 |          0.0333 |     0.3636 |       -0.0284 |
|   28.0000 |    2088.0000 |     63.0000 |     0.6984 |      0.3448 |             0.8333 |          0.2174 |     0.5745 |        0.2282 |
|   29.0000 |    2109.0000 |     63.0000 |     0.6190 |      0.2000 |             0.3000 |          0.1500 |     0.4750 |       -0.0148 |
|   30.0000 |    2130.0000 |     63.0000 |     0.3810 |      0.4935 |             0.3276 |          1.0000 |     0.3488 |        0.0718 |
|   31.0000 |    2151.0000 |     63.0000 |     0.7302 |      0.6792 |             0.5455 |          0.9000 |     0.7232 |        0.4695 |
|   32.0000 |    2172.0000 |     63.0000 |     0.7302 |      0.7671 |             0.7000 |          0.8485 |     0.7232 |        0.4533 |
|   33.0000 |    2193.0000 |     63.0000 |     0.7460 |      0.8140 |             0.6863 |          1.0000 |     0.7070 |        0.4545 |
|   34.0000 |    2214.0000 |     63.0000 |     0.6508 |      0.7317 |             0.7317 |          0.7317 |     0.6159 |        0.2317 |
|   35.0000 |    2235.0000 |     63.0000 |     0.2857 |      0.1509 |             1.0000 |          0.0816 |     0.2673 |        0.0380 |
|   36.0000 |    2256.0000 |     63.0000 |     0.2222 |      0.0392 |             1.0000 |          0.0200 |     0.1929 |        0.0084 |
|   37.0000 |    2277.0000 |     63.0000 |     0.2063 |      0.1379 |             1.0000 |          0.0741 |     0.2013 |        0.0223 |
|   38.0000 |    2298.0000 |     63.0000 |     0.5714 |      0.6494 |             0.7353 |          0.5814 |     0.5492 |        0.1173 |
|   39.0000 |    2319.0000 |     63.0000 |     0.4286 |      0.4375 |             0.5185 |          0.3784 |     0.4284 |       -0.1150 |
|   40.0000 |    2340.0000 |     63.0000 |     0.3333 |      0.4474 |             0.3148 |          0.7727 |     0.3037 |       -0.0970 |
|   41.0000 |    2361.0000 |     63.0000 |     0.3968 |      0.4865 |             0.3214 |          1.0000 |     0.3779 |        0.0952 |
|   42.0000 |    2382.0000 |     63.0000 |     0.3810 |      0.3810 |             0.2353 |          1.0000 |     0.3810 |        0.1049 |
|   43.0000 |    2403.0000 |     63.0000 |     0.4921 |      0.6098 |             0.4386 |          1.0000 |     0.4412 |        0.1295 |
|   44.0000 |    2424.0000 |     63.0000 |     0.4762 |      0.5075 |             0.5862 |          0.4474 |     0.4741 |       -0.0307 |
|   45.0000 |    2445.0000 |     63.0000 |     0.4603 |      0.4138 |             0.7500 |          0.2857 |     0.4569 |        0.0727 |
|   46.0000 |    2466.0000 |     63.0000 |     0.5079 |      0.3111 |             0.6364 |          0.2059 |     0.4642 |        0.0642 |
|   47.0000 |    2487.0000 |     63.0000 |     0.5079 |      0.4561 |             0.5000 |          0.4194 |     0.5034 |        0.0131 |
|   48.0000 |    2508.0000 |     63.0000 |     0.6984 |      0.2963 |             1.0000 |          0.1739 |     0.5522 |        0.2109 |
|   49.0000 |    2529.0000 |     63.0000 |     0.6032 |      0.0000 |             0.0000 |          0.0000 |     0.3762 |        0.0000 |
|   50.0000 |    2550.0000 |     63.0000 |     0.6032 |      0.0000 |             0.0000 |          0.0000 |     0.3762 |       -0.2087 |
|   51.0000 |    2571.0000 |     63.0000 |     0.7143 |      0.5500 |             0.9167 |          0.3929 |     0.6703 |        0.3864 |
|   52.0000 |    2592.0000 |     63.0000 |     0.7302 |      0.6222 |             0.7778 |          0.5185 |     0.7062 |        0.4251 |
|   53.0000 |    2613.0000 |     63.0000 |     0.5873 |      0.5185 |             0.4000 |          0.7368 |     0.5787 |        0.2095 |
|   54.0000 |    2634.0000 |     63.0000 |     0.4603 |      0.4138 |             0.2667 |          0.9231 |     0.4569 |        0.1377 |
|   55.0000 |    2655.0000 |     63.0000 |     0.6190 |      0.5000 |             0.3333 |          1.0000 |     0.5962 |        0.3000 |
|   56.0000 |    2676.0000 |     63.0000 |     0.8095 |      0.7857 |             0.7586 |          0.8148 |     0.8071 |        0.6147 |

## 8. 分类报告

```
              precision    recall  f1-score   support

       负例(0)       0.55      0.64      0.59      1897
       正例(1)       0.50      0.41      0.45      1694

    accuracy                           0.53      3591
   macro avg       0.53      0.53      0.52      3591
weighted avg       0.53      0.53      0.53      3591

```

## 9. 混淆矩阵

|       |   非涨(0) |   大涨(1) |
|:------|--------:|--------:|
| 非涨(0) |    1208 |     689 |
| 大涨(1) |     994 |     700 |

## 10. Top 20 重要特征

| feature            |   importance |
|:-------------------|-------------:|
| vol_volatility_20  |          371 |
| dist_from_low_365d |          326 |
| vol_price_corr_20  |          304 |
| dist_from_low_90d  |          300 |
| vix_proxy_change_7 |          277 |
| vix_proxy_14       |          272 |
| fgi_ma_14          |          260 |
| dist_from_high_30d |          244 |
| sma_cross_50_200   |          238 |
| vix_proxy_60       |          236 |
| vol_price_corr_10  |          233 |
| dist_from_low_30d  |          232 |
| trades_sma_20      |          221 |
| dist_from_low_180d |          219 |
| rsi_28             |          212 |
| flow_momentum_20   |          212 |
| buy_pressure_ma_20 |          205 |
| return_3d          |          205 |
| low_50d_dist       |          203 |
| atr_21             |          200 |

## 附录: 完整配置

```yaml
experiment:
  name: weekly_bull_v6
  description: 综合最优版多头 v6：reversal T=14, SPW, 5特征集, 充分学习
  tags:
  - weekly
  - bull
  - binary
  - v6
  - best
  category: weekly
data:
  source: binance
  symbol: BTCUSDT
  interval: 1d
  start: '2018-01-01'
  end: '2025-12-31'
  path: data/raw/btc_binance_BTCUSDT_1d.csv
features:
  sets:
  - technical
  - volume
  - flow
  - sentiment
  - market_structure
  drop_na_method: ffill_then_drop
  scaling: null
label:
  strategy: reversal
  T: 14
  X: 0.05
  map:
    0: 0
    1: 0
    2: 1
model:
  type: lightgbm
  params:
    n_estimators: 1000
    max_depth: 5
    learning_rate: 0.05
    num_leaves: 24
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    reg_alpha: 0.15
    reg_lambda: 0.15
    random_state: 42
    verbose: -1
    min_split_gain: 0.003
    auto_scale_pos_weight: true
evaluation:
  method: walk_forward
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
  - accuracy
  - f1_binary
  - precision_binary
  - recall_binary
  - f1_macro
  - cohen_kappa
seed: 42

```