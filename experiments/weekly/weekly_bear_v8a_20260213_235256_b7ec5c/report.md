# 实验报告: weekly_bear_v8a_20260213_235256_b7ec5c

**生成时间**: 2026-02-13 23:53:36

## 1. 实验概要

| 项目 | 值 |
|------|------|
| 实验名称 | weekly_bear_v8a |
| 描述 | Bear v8a: 回归目标 + 概率阈值优化 |
| 标签 | ['weekly', 'bear', 'binary', 'v8a', 'regression', 'threshold'] |
| Git Commit | 41bd739 |
| Git Branch | main |
| 耗时 | Nones |
| 随机种子 | 42 |

## 2. 数据配置

- **数据源**: binance
- **交易对**: BTCUSDT
- **周期**: 1d
- **时间范围**: 2018-01-01 ~ 2025-12-31
- **数据文件**: `data/raw/btc_binance_BTCUSDT_1d.csv`

## 3. 特征配置

- **特征集**: ['technical', 'volume', 'flow', 'market_structure', 'external']
- **总特征数**: 60
- **NaN处理**: ffill_then_drop

## 4. 标签配置

- **策略**: reversal
- **窗口 T**: 14 天
- **阈值 X**: 0.05 (5%)

## 5. 模型配置

- **类型**: lightgbm_regressor
- **参数**:
  - n_estimators: 800
  - max_depth: 5
  - learning_rate: 0.03
  - num_leaves: 20
  - subsample: 0.8
  - colsample_bytree: 0.6
  - min_child_samples: 25
  - reg_alpha: 0.1
  - reg_lambda: 0.1
  - random_state: 42
  - verbose: -1
  - min_split_gain: 0.01
  - auto_threshold: True
  - threshold_metric: f1

## 6. 评估结果（汇总）

| 指标               |       值 |
|:-----------------|--------:|
| accuracy         |  0.4247 |
| f1_binary        |  0.4694 |
| precision_binary |  0.352  |
| recall_binary    |  0.7044 |
| f1_macro         |  0.4206 |
| cohen_kappa      | -0.0239 |

## 7. Walk-Forward Fold 详情

- **方法**: walk_forward
- **初始训练集**: 1500
- **OOS窗口**: 63
- **步进**: 21
- **总 Fold 数**: 33

|   fold_id |   train_size |   test_size |   accuracy |   f1_binary |   precision_binary |   recall_binary |   f1_macro |   cohen_kappa |
|----------:|-------------:|------------:|-----------:|------------:|-------------------:|----------------:|-----------:|--------------:|
|    0.0000 |    1500.0000 |     63.0000 |     0.1746 |      0.2778 |             0.1613 |          1.0000 |     0.1574 |        0.0061 |
|    1.0000 |    1521.0000 |     63.0000 |     0.3968 |      0.4865 |             0.3214 |          1.0000 |     0.3779 |        0.0952 |
|    2.0000 |    1542.0000 |     63.0000 |     0.6667 |      0.7586 |             0.6226 |          0.9706 |     0.6101 |        0.2952 |
|    3.0000 |    1563.0000 |     63.0000 |     0.5079 |      0.6593 |             0.4918 |          1.0000 |     0.3868 |        0.0579 |
|    4.0000 |    1584.0000 |     63.0000 |     0.4127 |      0.5747 |             0.4032 |          1.0000 |     0.3130 |        0.0210 |
|    5.0000 |    1605.0000 |     63.0000 |     0.4762 |      0.6374 |             0.4754 |          0.9667 |     0.3473 |       -0.0029 |
|    6.0000 |    1626.0000 |     63.0000 |     0.4127 |      0.4308 |             0.4375 |          0.4242 |     0.4121 |       -0.1755 |
|    7.0000 |    1647.0000 |     63.0000 |     0.6667 |      0.7273 |             0.7368 |          0.7179 |     0.6494 |        0.2989 |
|    8.0000 |    1668.0000 |     63.0000 |     0.4603 |      0.5750 |             0.4423 |          0.8214 |     0.4179 |       -0.0066 |
|    9.0000 |    1689.0000 |     63.0000 |     0.6190 |      0.4000 |             0.4706 |          0.3478 |     0.5605 |        0.1300 |
|   10.0000 |    1710.0000 |     63.0000 |     0.4603 |      0.4333 |             0.2889 |          0.8667 |     0.4591 |        0.1185 |
|   11.0000 |    1731.0000 |     63.0000 |     0.1111 |      0.1515 |             0.0820 |          1.0000 |     0.1091 |        0.0056 |
|   12.0000 |    1752.0000 |     63.0000 |     0.3175 |      0.2712 |             0.1600 |          0.8889 |     0.3147 |        0.0383 |
|   13.0000 |    1773.0000 |     63.0000 |     0.2857 |      0.3077 |             0.1818 |          1.0000 |     0.2850 |        0.0534 |
|   14.0000 |    1794.0000 |     63.0000 |     0.2698 |      0.4103 |             0.2581 |          1.0000 |     0.2260 |        0.0109 |
|   15.0000 |    1815.0000 |     63.0000 |     0.3333 |      0.4750 |             0.3115 |          1.0000 |     0.2810 |        0.0279 |
|   16.0000 |    1836.0000 |     63.0000 |     0.4603 |      0.6047 |             0.4333 |          1.0000 |     0.3773 |        0.0679 |
|   17.0000 |    1857.0000 |     63.0000 |     0.4127 |      0.2449 |             0.3750 |          0.1818 |     0.3822 |       -0.1477 |
|   18.0000 |    1878.0000 |     63.0000 |     0.6667 |      0.6316 |             0.8571 |          0.5000 |     0.6636 |        0.3636 |
|   19.0000 |    1899.0000 |     63.0000 |     0.4762 |      0.4211 |             0.4138 |          0.4286 |     0.4714 |       -0.0569 |
|   20.0000 |    1920.0000 |     63.0000 |     0.2540 |      0.3896 |             0.2419 |          1.0000 |     0.2152 |        0.0100 |
|   21.0000 |    1941.0000 |     63.0000 |     0.2540 |      0.3562 |             0.2167 |          1.0000 |     0.2347 |        0.0257 |
|   22.0000 |    1962.0000 |     63.0000 |     0.2222 |      0.3099 |             0.1864 |          0.9167 |     0.2095 |       -0.0098 |
|   23.0000 |    1983.0000 |     63.0000 |     0.3968 |      0.1739 |             0.1176 |          0.3333 |     0.3495 |       -0.1499 |
|   24.0000 |    2004.0000 |     63.0000 |     0.2381 |      0.2258 |             0.1273 |          1.0000 |     0.2379 |        0.0357 |
|   25.0000 |    2025.0000 |     63.0000 |     0.4603 |      0.4688 |             0.3061 |          1.0000 |     0.4602 |        0.1639 |
|   26.0000 |    2046.0000 |     63.0000 |     0.8095 |      0.6471 |             0.7857 |          0.5500 |     0.7583 |        0.5221 |
|   27.0000 |    2067.0000 |     63.0000 |     0.6508 |      0.6207 |             0.5455 |          0.7200 |     0.6486 |        0.3084 |
|   28.0000 |    2088.0000 |     63.0000 |     0.4762 |      0.4923 |             0.4000 |          0.6400 |     0.4757 |        0.0076 |
|   29.0000 |    2109.0000 |     63.0000 |     0.3651 |      0.4118 |             0.5185 |          0.3415 |     0.3611 |       -0.2174 |
|   30.0000 |    2130.0000 |     63.0000 |     0.4603 |      0.4138 |             0.7500 |          0.2857 |     0.4569 |        0.0727 |
|   31.0000 |    2151.0000 |     63.0000 |     0.4921 |      0.5556 |             0.5405 |          0.5714 |     0.4815 |       -0.0360 |
|   32.0000 |    2172.0000 |     63.0000 |     0.3492 |      0.5176 |             0.3492 |          1.0000 |     0.2588 |        0.0000 |

## 8. 分类报告

```
              precision    recall  f1-score   support

       负例(0)       0.61      0.27      0.37      1328
       正例(1)       0.35      0.70      0.47       751

    accuracy                           0.42      2079
   macro avg       0.48      0.49      0.42      2079
weighted avg       0.52      0.42      0.41      2079

```

## 9. 混淆矩阵

|       |   非跌(0) |   大跌(1) |
|:------|--------:|--------:|
| 非跌(0) |     354 |     974 |
| 大跌(1) |     222 |     529 |

## 10. Top 20 重要特征

| feature               |   importance |
|:----------------------|-------------:|
| ext_fr_ma_30          |          342 |
| vol_volatility_20     |          341 |
| ext_btc_ndx_corr_20d  |          320 |
| sma_200               |          288 |
| ext_dxy               |          283 |
| low_14d_dist          |          271 |
| ext_ndx_vs_ma50       |          271 |
| ext_btc_tnx_corr_20d  |          267 |
| ext_dxy_vol_20d       |          266 |
| ext_btc_dxy_corr_20d  |          255 |
| sma_100               |          253 |
| ext_fr_std_7          |          238 |
| macd_hist             |          234 |
| flow_momentum_20      |          232 |
| ext_btc_gold_corr_20d |          230 |
| high_50d_dist         |          229 |
| ext_fgi_std_14        |          228 |
| vol_price_corr_10     |          224 |
| vol_volatility_10     |          221 |
| ext_gold              |          220 |

## 附录: 完整配置

```yaml
experiment:
  name: weekly_bear_v8a
  description: 'Bear v8a: 回归目标 + 概率阈值优化'
  tags:
  - weekly
  - bear
  - binary
  - v8a
  - regression
  - threshold
  category: weekly
data:
  source: binance
  symbol: BTCUSDT
  interval: 1d
  start: '2018-01-01'
  end: '2025-12-31'
  path: data/raw/btc_binance_BTCUSDT_1d.csv
features:
  sets:
  - technical
  - volume
  - flow
  - market_structure
  - external
  drop_na_method: ffill_then_drop
  scaling: null
  selection:
    top_n: 60
label:
  strategy: reversal
  T: 14
  X: 0.05
  map:
    0: 1
    1: 0
    2: 0
model:
  type: lightgbm_regressor
  params:
    n_estimators: 800
    max_depth: 5
    learning_rate: 0.03
    num_leaves: 20
    subsample: 0.8
    colsample_bytree: 0.6
    min_child_samples: 25
    reg_alpha: 0.1
    reg_lambda: 0.1
    random_state: 42
    verbose: -1
    min_split_gain: 0.01
    auto_threshold: true
    threshold_metric: f1
evaluation:
  method: walk_forward
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
  - accuracy
  - f1_binary
  - precision_binary
  - recall_binary
  - f1_macro
  - cohen_kappa
  threshold_optimize: true
  threshold_metric: f1
  threshold_val_ratio: 0.15
seed: 42

```