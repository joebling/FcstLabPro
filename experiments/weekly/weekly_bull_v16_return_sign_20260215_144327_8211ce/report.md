# 实验报告: weekly_bull_v16_return_sign_20260215_144327_8211ce

**生成时间**: 2026-02-15 14:44:56

## 1. 实验概要

| 项目 | 值 |
|------|------|
| 实验名称 | weekly_bull_v16_return_sign |
| 描述 | Bull v16: return_sign + T=21 + FGI + Regime |
| 标签 | ['weekly', 'bull', 'binary', 'v16', 'return_sign'] |
| Git Commit | 007d62a |
| Git Branch | main |
| 耗时 | Nones |
| 随机种子 | 42 |

## 2. 数据配置

- **数据源**: binance
- **交易对**: BTCUSDT
- **周期**: 1d
- **时间范围**: 2018-01-01 ~ 2025-12-31
- **数据文件**: `data/raw/btc_binance_BTCUSDT_1d.csv`

## 3. 特征配置

- **特征集**: ['technical', 'volume', 'flow', 'market_structure', 'external_fgi', 'regime']
- **总特征数**: 148
- **NaN处理**: ffill_then_drop

## 4. 标签配置

- **策略**: return_sign
- **窗口 T**: 21 天
- **阈值 X**: 0.08 (8%)

## 5. 模型配置

- **类型**: lightgbm
- **参数**:
  - n_estimators: 500
  - max_depth: 6
  - learning_rate: 0.05
  - num_leaves: 31
  - subsample: 0.8
  - colsample_bytree: 0.8
  - min_child_samples: 20
  - reg_alpha: 0.1
  - reg_lambda: 0.1
  - random_state: 42
  - verbose: -1
  - auto_scale_pos_weight: True

## 6. 评估结果（汇总）

| 指标               |      值 |
|:-----------------|-------:|
| accuracy         | 0.5188 |
| f1_binary        | 0.5219 |
| precision_binary | 0.5701 |
| recall_binary    | 0.4811 |
| f1_macro         | 0.5188 |
| cohen_kappa      | 0.0445 |

## 7. Walk-Forward Fold 详情

- **方法**: walk_forward
- **初始训练集**: 1500
- **OOS窗口**: 63
- **步进**: 21
- **总 Fold 数**: 57

|   fold_id |   train_size |   test_size |   accuracy |   f1_binary |   precision_binary |   recall_binary |   f1_macro |   cohen_kappa |
|----------:|-------------:|------------:|-----------:|------------:|-------------------:|----------------:|-----------:|--------------:|
|    0.0000 |    1500.0000 |     63.0000 |     0.5873 |      0.6389 |             0.5111 |          0.8519 |     0.5787 |        0.2222 |
|    1.0000 |    1521.0000 |     63.0000 |     0.6032 |      0.3902 |             0.7273 |          0.2667 |     0.5481 |        0.1810 |
|    2.0000 |    1542.0000 |     63.0000 |     0.4127 |      0.4308 |             0.4000 |          0.4667 |     0.4121 |       -0.1684 |
|    3.0000 |    1563.0000 |     63.0000 |     0.5238 |      0.2857 |             0.8571 |          0.1714 |     0.4643 |        0.1234 |
|    4.0000 |    1584.0000 |     63.0000 |     0.3810 |      0.2642 |             1.0000 |          0.1522 |     0.3650 |        0.0883 |
|    5.0000 |    1605.0000 |     63.0000 |     0.2222 |      0.0000 |             0.0000 |          0.0000 |     0.1818 |        0.0000 |
|    6.0000 |    1626.0000 |     63.0000 |     0.4762 |      0.4762 |             1.0000 |          0.3125 |     0.4762 |        0.1779 |
|    7.0000 |    1647.0000 |     63.0000 |     0.4603 |      0.4688 |             1.0000 |          0.3061 |     0.4602 |        0.1639 |
|    8.0000 |    1668.0000 |     63.0000 |     0.6190 |      0.7000 |             0.8485 |          0.5957 |     0.5891 |        0.2198 |
|    9.0000 |    1689.0000 |     63.0000 |     0.6667 |      0.6866 |             0.6765 |          0.6970 |     0.6653 |        0.3308 |
|   10.0000 |    1710.0000 |     63.0000 |     0.4762 |      0.5217 |             0.3529 |          1.0000 |     0.4714 |        0.1720 |
|   11.0000 |    1731.0000 |     63.0000 |     0.6825 |      0.6667 |             0.5556 |          0.8333 |     0.6818 |        0.3860 |
|   12.0000 |    1752.0000 |     63.0000 |     0.6032 |      0.4186 |             0.6923 |          0.3000 |     0.5587 |        0.1835 |
|   13.0000 |    1773.0000 |     63.0000 |     0.6032 |      0.0000 |             0.0000 |          0.0000 |     0.3762 |        0.0000 |
|   14.0000 |    1794.0000 |     63.0000 |     0.9524 |      0.8000 |             0.7500 |          0.8571 |     0.8865 |        0.7731 |
|   15.0000 |    1815.0000 |     63.0000 |     0.8730 |      0.7778 |             0.6667 |          0.9333 |     0.8444 |        0.6923 |
|   16.0000 |    1836.0000 |     63.0000 |     0.8889 |      0.9067 |             0.8293 |          1.0000 |     0.8847 |        0.7723 |
|   17.0000 |    1857.0000 |     63.0000 |     0.8571 |      0.9126 |             0.9792 |          0.8545 |     0.7607 |        0.5310 |
|   18.0000 |    1878.0000 |     63.0000 |     0.6349 |      0.7767 |             0.9756 |          0.6452 |     0.3883 |       -0.0313 |
|   19.0000 |    1899.0000 |     63.0000 |     0.3492 |      0.5176 |             1.0000 |          0.3492 |     0.2588 |        0.0000 |
|   20.0000 |    1920.0000 |     63.0000 |     0.1746 |      0.1034 |             1.0000 |          0.0545 |     0.1694 |        0.0144 |
|   21.0000 |    1941.0000 |     63.0000 |     0.5238 |      0.5588 |             0.5938 |          0.5278 |     0.5208 |        0.0455 |
|   22.0000 |    1962.0000 |     63.0000 |     0.5556 |      0.7143 |             0.5556 |          1.0000 |     0.3571 |        0.0000 |
|   23.0000 |    1983.0000 |     63.0000 |     0.5238 |      0.6875 |             0.6226 |          0.7674 |     0.3438 |       -0.2685 |
|   24.0000 |    2004.0000 |     63.0000 |     0.3492 |      0.4533 |             0.9444 |          0.2982 |     0.3247 |        0.0337 |
|   25.0000 |    2025.0000 |     63.0000 |     0.5238 |      0.5000 |             1.0000 |          0.3333 |     0.5227 |        0.2222 |
|   26.0000 |    2046.0000 |     63.0000 |     0.7460 |      0.5789 |             1.0000 |          0.4074 |     0.6986 |        0.4400 |
|   27.0000 |    2067.0000 |     63.0000 |     0.4921 |      0.0000 |             0.0000 |          0.0000 |     0.3298 |        0.0000 |
|   28.0000 |    2088.0000 |     63.0000 |     0.6032 |      0.0741 |             1.0000 |          0.0385 |     0.4108 |        0.0449 |
|   29.0000 |    2109.0000 |     63.0000 |     0.5873 |      0.1333 |             1.0000 |          0.0714 |     0.4312 |        0.0787 |
|   30.0000 |    2130.0000 |     63.0000 |     0.3968 |      0.5366 |             0.3667 |          1.0000 |     0.3365 |        0.0523 |
|   31.0000 |    2151.0000 |     63.0000 |     0.9048 |      0.8929 |             0.8333 |          0.9615 |     0.9036 |        0.8079 |
|   32.0000 |    2172.0000 |     63.0000 |     0.6032 |      0.6575 |             0.5000 |          0.9600 |     0.5929 |        0.2838 |
|   33.0000 |    2193.0000 |     63.0000 |     0.3968 |      0.2692 |             0.2917 |          0.2500 |     0.3779 |       -0.2391 |
|   34.0000 |    2214.0000 |     63.0000 |     0.4127 |      0.2449 |             0.7500 |          0.1463 |     0.3822 |        0.0411 |
|   35.0000 |    2235.0000 |     63.0000 |     0.2857 |      0.3662 |             1.0000 |          0.2241 |     0.2740 |        0.0438 |
|   36.0000 |    2256.0000 |     63.0000 |     0.1270 |      0.1791 |             1.0000 |          0.0984 |     0.1235 |        0.0069 |
|   37.0000 |    2277.0000 |     63.0000 |     0.3333 |      0.3226 |             1.0000 |          0.1923 |     0.3332 |        0.0768 |
|   38.0000 |    2298.0000 |     63.0000 |     0.5556 |      0.6957 |             0.6275 |          0.7805 |     0.4361 |       -0.0929 |
|   39.0000 |    2319.0000 |     63.0000 |     0.4762 |      0.6452 |             0.4762 |          1.0000 |     0.3226 |        0.0000 |
|   40.0000 |    2340.0000 |     63.0000 |     0.4921 |      0.3600 |             0.3000 |          0.4500 |     0.4695 |       -0.0338 |
|   41.0000 |    2361.0000 |     63.0000 |     0.2381 |      0.3514 |             0.2131 |          1.0000 |     0.2141 |        0.0169 |
|   42.0000 |    2382.0000 |     63.0000 |     0.3492 |      0.3051 |             0.1800 |          1.0000 |     0.3466 |        0.0831 |
|   43.0000 |    2403.0000 |     63.0000 |     0.6190 |      0.6757 |             0.5682 |          0.8333 |     0.6071 |        0.2522 |
|   44.0000 |    2424.0000 |     63.0000 |     0.7619 |      0.8454 |             0.8367 |          0.8542 |     0.6641 |        0.3284 |
|   45.0000 |    2445.0000 |     63.0000 |     0.5714 |      0.6824 |             0.8286 |          0.5800 |     0.5119 |        0.0830 |
|   46.0000 |    2466.0000 |     63.0000 |     0.5714 |      0.6400 |             0.8000 |          0.5333 |     0.5553 |        0.1600 |
|   47.0000 |    2487.0000 |     63.0000 |     0.2540 |      0.2540 |             0.4000 |          0.1860 |     0.2540 |       -0.3166 |
|   48.0000 |    2508.0000 |     63.0000 |     0.3651 |      0.0000 |             0.0000 |          0.0000 |     0.2674 |        0.0000 |
|   49.0000 |    2529.0000 |     63.0000 |     0.6190 |      0.6364 |             0.5250 |          0.8077 |     0.6182 |        0.2724 |
|   50.0000 |    2550.0000 |     63.0000 |     0.5873 |      0.5806 |             0.4865 |          0.7200 |     0.5872 |        0.2033 |
|   51.0000 |    2571.0000 |     63.0000 |     0.5079 |      0.6437 |             0.4746 |          1.0000 |     0.4244 |        0.1029 |
|   52.0000 |    2592.0000 |     63.0000 |     0.3016 |      0.1538 |             0.1538 |          0.1538 |     0.2796 |       -0.4407 |
|   53.0000 |    2613.0000 |     63.0000 |     0.2540 |      0.2540 |             0.1455 |          1.0000 |     0.2540 |        0.0414 |
|   54.0000 |    2634.0000 |     63.0000 |     0.3810 |      0.2642 |             0.1522 |          1.0000 |     0.3650 |        0.0883 |
|   55.0000 |    2655.0000 |     63.0000 |     0.6508 |      0.6562 |             0.4884 |          1.0000 |     0.6507 |        0.3774 |
|   56.0000 |    2676.0000 |     63.0000 |     0.6032 |      0.5902 |             0.5143 |          0.6923 |     0.6028 |        0.2215 |

## 8. 分类报告

```
              precision    recall  f1-score   support

       负例(0)       0.47      0.56      0.52      1631
       正例(1)       0.57      0.48      0.52      1960

    accuracy                           0.52      3591
   macro avg       0.52      0.52      0.52      3591
weighted avg       0.53      0.52      0.52      3591

```

## 9. 混淆矩阵

|       |   负例(0) |   正例(1) |
|:------|--------:|--------:|
| 负例(0) |     920 |     711 |
| 正例(1) |    1017 |     943 |

## 10. Top 20 重要特征

| feature            |   importance |
|:-------------------|-------------:|
| trades_sma_20      |          254 |
| sma_200            |          225 |
| ext_fgi_std_14     |          216 |
| sma_cross_50_200   |          206 |
| vol_volatility_20  |          200 |
| low_50d_dist       |          200 |
| obv                |          180 |
| buy_pressure_ma_20 |          174 |
| sma_100            |          168 |
| atr_pct_21         |          166 |
| volatility_20d     |          165 |
| low_21d_dist       |          151 |
| rsi_28             |          150 |
| cvd_change_21      |          142 |
| volatility_5d      |          142 |
| volatility_10d     |          141 |
| flow_momentum_20   |          139 |
| vol_volatility_10  |          137 |
| atr_21             |          130 |
| trades_sma_5       |          124 |

## 附录: 完整配置

```yaml
experiment:
  name: weekly_bull_v16_return_sign
  description: 'Bull v16: return_sign + T=21 + FGI + Regime'
  tags:
  - weekly
  - bull
  - binary
  - v16
  - return_sign
  category: weekly
data:
  source: binance
  symbol: BTCUSDT
  interval: 1d
  start: '2018-01-01'
  end: '2025-12-31'
  path: data/raw/btc_binance_BTCUSDT_1d.csv
features:
  sets:
  - technical
  - volume
  - flow
  - market_structure
  - external_fgi
  - regime
  drop_na_method: ffill_then_drop
  scaling: null
label:
  strategy: return_sign
  T: 21
  X: 0.08
model:
  type: lightgbm
  params:
    n_estimators: 500
    max_depth: 6
    learning_rate: 0.05
    num_leaves: 31
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    reg_alpha: 0.1
    reg_lambda: 0.1
    random_state: 42
    verbose: -1
    auto_scale_pos_weight: true
evaluation:
  method: walk_forward
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
  - accuracy
  - f1_binary
  - precision_binary
  - recall_binary
  - f1_macro
  - cohen_kappa
seed: 42

```