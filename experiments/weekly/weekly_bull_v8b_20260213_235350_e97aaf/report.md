# 实验报告: weekly_bull_v8b_20260213_235350_e97aaf

**生成时间**: 2026-02-13 23:59:18

## 1. 实验概要

| 项目 | 值 |
|------|------|
| 实验名称 | weekly_bull_v8b |
| 描述 | Bull v8b: Stacking 4-LightGBM + LogisticRegression 元学习器 |
| 标签 | ['weekly', 'bull', 'binary', 'v8b', 'stacking', 'ensemble'] |
| Git Commit | 41bd739 |
| Git Branch | main |
| 耗时 | Nones |
| 随机种子 | 42 |

## 2. 数据配置

- **数据源**: binance
- **交易对**: BTCUSDT
- **周期**: 1d
- **时间范围**: 2018-01-01 ~ 2025-12-31
- **数据文件**: `data/raw/btc_binance_BTCUSDT_1d.csv`

## 3. 特征配置

- **特征集**: ['technical', 'volume', 'flow', 'market_structure', 'external']
- **总特征数**: 60
- **NaN处理**: ffill_then_drop

## 4. 标签配置

- **策略**: reversal
- **窗口 T**: 14 天
- **阈值 X**: 0.05 (5%)

## 5. 模型配置

- **类型**: stacking
- **参数**:
  - n_estimators: 1000
  - max_depth: 6
  - learning_rate: 0.05
  - num_leaves: 31
  - subsample: 0.8
  - colsample_bytree: 0.8
  - min_child_samples: 20
  - reg_alpha: 0.1
  - reg_lambda: 0.1
  - random_state: 42
  - verbose: -1
  - meta_model: logistic
  - n_cv_folds: 3
  - use_proba: True
  - passthrough: False
  - auto_scale_pos_weight: True

## 6. 评估结果（汇总）

| 指标               |       值 |
|:-----------------|--------:|
| accuracy         |  0.4921 |
| f1_binary        |  0.4027 |
| precision_binary |  0.4582 |
| recall_binary    |  0.3592 |
| f1_macro         |  0.4804 |
| cohen_kappa      | -0.028  |

## 7. Walk-Forward Fold 详情

- **方法**: walk_forward
- **初始训练集**: 1500
- **OOS窗口**: 63
- **步进**: 21
- **总 Fold 数**: 33

|   fold_id |   train_size |   test_size |   accuracy |   f1_binary |   precision_binary |   recall_binary |   f1_macro |   cohen_kappa |
|----------:|-------------:|------------:|-----------:|------------:|-------------------:|----------------:|-----------:|--------------:|
|    0.0000 |    1500.0000 |     63.0000 |     0.2857 |      0.3077 |             0.7143 |          0.1961 |     0.2850 |       -0.0630 |
|    1.0000 |    1521.0000 |     63.0000 |     0.3492 |      0.2264 |             0.7500 |          0.1333 |     0.3324 |        0.0137 |
|    2.0000 |    1542.0000 |     63.0000 |     0.5556 |      0.3913 |             0.4737 |          0.3333 |     0.5207 |        0.0577 |
|    3.0000 |    1563.0000 |     63.0000 |     0.4127 |      0.5067 |             0.4222 |          0.6333 |     0.3906 |       -0.1511 |
|    4.0000 |    1584.0000 |     63.0000 |     0.6032 |      0.0000 |             0.0000 |          0.0000 |     0.3762 |       -0.0620 |
|    5.0000 |    1605.0000 |     63.0000 |     0.6825 |      0.0000 |             0.0000 |          0.0000 |     0.4057 |        0.0000 |
|    6.0000 |    1626.0000 |     63.0000 |     0.5873 |      0.1333 |             0.1538 |          0.1176 |     0.4312 |       -0.1312 |
|    7.0000 |    1647.0000 |     63.0000 |     0.4603 |      0.0556 |             0.0769 |          0.0435 |     0.3389 |       -0.2826 |
|    8.0000 |    1668.0000 |     63.0000 |     0.4444 |      0.0541 |             0.3333 |          0.0294 |     0.3304 |       -0.0367 |
|    9.0000 |    1689.0000 |     63.0000 |     0.5873 |      0.5806 |             0.6667 |          0.5143 |     0.5872 |        0.1875 |
|   10.0000 |    1710.0000 |     63.0000 |     0.5397 |      0.5797 |             0.7143 |          0.4878 |     0.5355 |        0.1092 |
|   11.0000 |    1731.0000 |     63.0000 |     0.2381 |      0.1111 |             1.0000 |          0.0588 |     0.2222 |        0.0233 |
|   12.0000 |    1752.0000 |     63.0000 |     0.2222 |      0.0755 |             1.0000 |          0.0392 |     0.2021 |        0.0153 |
|   13.0000 |    1773.0000 |     63.0000 |     0.4762 |      0.5217 |             1.0000 |          0.3529 |     0.4714 |        0.1720 |
|   14.0000 |    1794.0000 |     63.0000 |     0.4921 |      0.6190 |             0.6190 |          0.6190 |     0.4286 |       -0.1429 |
|   15.0000 |    1815.0000 |     63.0000 |     0.5556 |      0.5758 |             0.6333 |          0.5278 |     0.5545 |        0.1171 |
|   16.0000 |    1836.0000 |     63.0000 |     0.4286 |      0.5263 |             0.3704 |          0.9091 |     0.4032 |        0.0597 |
|   17.0000 |    1857.0000 |     63.0000 |     0.4127 |      0.4932 |             0.3273 |          1.0000 |     0.3975 |        0.1100 |
|   18.0000 |    1878.0000 |     63.0000 |     0.2698 |      0.3429 |             0.2069 |          1.0000 |     0.2607 |        0.0398 |
|   19.0000 |    1899.0000 |     63.0000 |     0.5873 |      0.5000 |             0.5417 |          0.4643 |     0.5743 |        0.1522 |
|   20.0000 |    1920.0000 |     63.0000 |     0.3333 |      0.0870 |             0.2857 |          0.0513 |     0.2810 |       -0.1250 |
|   21.0000 |    1941.0000 |     63.0000 |     0.3968 |      0.2692 |             0.7778 |          0.1628 |     0.3779 |        0.0432 |
|   22.0000 |    1962.0000 |     63.0000 |     0.5873 |      0.4091 |             0.8182 |          0.2727 |     0.5460 |        0.1994 |
|   23.0000 |    1983.0000 |     63.0000 |     0.4762 |      0.6118 |             0.4561 |          0.9286 |     0.4034 |        0.0388 |
|   24.0000 |    2004.0000 |     63.0000 |     0.6984 |      0.5778 |             0.6500 |          0.5200 |     0.6716 |        0.3477 |
|   25.0000 |    2025.0000 |     63.0000 |     0.6190 |      0.2500 |             0.4444 |          0.1739 |     0.4973 |        0.0562 |
|   26.0000 |    2046.0000 |     63.0000 |     0.7302 |      0.4138 |             0.5000 |          0.3529 |     0.6193 |        0.2452 |
|   27.0000 |    2067.0000 |     63.0000 |     0.5873 |      0.5000 |             0.4815 |          0.5200 |     0.5743 |        0.1495 |
|   28.0000 |    2088.0000 |     63.0000 |     0.5238 |      0.3182 |             0.4118 |          0.2593 |     0.4762 |       -0.0194 |
|   29.0000 |    2109.0000 |     63.0000 |     0.3016 |      0.2143 |             0.1622 |          0.3158 |     0.2929 |       -0.3063 |
|   30.0000 |    2130.0000 |     63.0000 |     0.3968 |      0.4062 |             0.2549 |          1.0000 |     0.3967 |        0.1153 |
|   31.0000 |    2151.0000 |     63.0000 |     0.5714 |      0.5263 |             0.3571 |          1.0000 |     0.5675 |        0.2703 |
|   32.0000 |    2172.0000 |     63.0000 |     0.8254 |      0.7660 |             0.9000 |          0.6667 |     0.8134 |        0.6316 |

## 8. 分类报告

```
              precision    recall  f1-score   support

       负例(0)       0.51      0.61      0.56      1088
       正例(1)       0.46      0.36      0.40       991

    accuracy                           0.49      2079
   macro avg       0.49      0.49      0.48      2079
weighted avg       0.49      0.49      0.48      2079

```

## 9. 混淆矩阵

|       |   非涨(0) |   大涨(1) |
|:------|--------:|--------:|
| 非涨(0) |     667 |     421 |
| 大涨(1) |     635 |     356 |

## 10. Top 20 重要特征

| feature              |   importance |
|:---------------------|-------------:|
| ext_btc_tnx_corr_60d |       0.0280 |
| cvd_ma_21            |       0.0272 |
| ema_100              |       0.0259 |
| vol_volatility_20    |       0.0252 |
| ext_dxy_vs_ma50      |       0.0240 |
| vol_price_corr_20    |       0.0231 |
| rsi_28               |       0.0228 |
| ext_fr_ma_30         |       0.0227 |
| sma_100              |       0.0225 |
| ext_btc_tnx_corr_20d |       0.0221 |
| trades_sma_20        |       0.0213 |
| macd_hist            |       0.0211 |
| ext_dxy              |       0.0209 |
| funding_rate_24      |       0.0205 |
| ext_dxy_vol_20d      |       0.0194 |
| cvd_ma_7             |       0.0194 |
| stoch_k_14           |       0.0193 |
| ext_btc_spx_corr_60d |       0.0190 |
| ext_spx_vol_20d      |       0.0189 |
| ext_btc_vix_corr_60d |       0.0183 |

## 附录: 完整配置

```yaml
experiment:
  name: weekly_bull_v8b
  description: 'Bull v8b: Stacking 4-LightGBM + LogisticRegression 元学习器'
  tags:
  - weekly
  - bull
  - binary
  - v8b
  - stacking
  - ensemble
  category: weekly
data:
  source: binance
  symbol: BTCUSDT
  interval: 1d
  start: '2018-01-01'
  end: '2025-12-31'
  path: data/raw/btc_binance_BTCUSDT_1d.csv
features:
  sets:
  - technical
  - volume
  - flow
  - market_structure
  - external
  drop_na_method: ffill_then_drop
  scaling: null
  selection:
    top_n: 60
label:
  strategy: reversal
  T: 14
  X: 0.05
  map:
    0: 0
    1: 0
    2: 1
model:
  type: stacking
  params:
    n_estimators: 1000
    max_depth: 6
    learning_rate: 0.05
    num_leaves: 31
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    reg_alpha: 0.1
    reg_lambda: 0.1
    random_state: 42
    verbose: -1
    meta_model: logistic
    n_cv_folds: 3
    use_proba: true
    passthrough: false
    auto_scale_pos_weight: true
evaluation:
  method: walk_forward
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
  - accuracy
  - f1_binary
  - precision_binary
  - recall_binary
  - f1_macro
  - cohen_kappa
seed: 42

```