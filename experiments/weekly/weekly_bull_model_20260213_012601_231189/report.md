# 实验报告: weekly_bull_model_20260213_012601_231189

**生成时间**: 2026-02-13 01:28:39

## 1. 实验概要

| 项目 | 值 |
|------|------|
| 实验名称 | weekly_bull_model |
| 描述 | 周线多头模型：预测未来4周涨幅超过5%的机会 (T=28, X=0.05). 标签映射: {0:0, 1:0, 2:1} → 1=大涨 |
| 标签 | ['weekly', 'bull', 'binary'] |
| Git Commit | 85a1ee5 |
| Git Branch | main |
| 耗时 | Nones |
| 随机种子 | 42 |

## 2. 数据配置

- **数据源**: binance
- **交易对**: BTCUSDT
- **周期**: 1d
- **时间范围**: 2018-01-01 ~ 2025-12-31
- **数据文件**: `data/raw/btc_binance_BTCUSDT_1d.csv`

## 3. 特征配置

- **特征集**: ['technical', 'volume', 'flow', 'sentiment']
- **总特征数**: 128
- **NaN处理**: ffill_then_drop

## 4. 标签配置

- **策略**: reversal
- **窗口 T**: 28 天
- **阈值 X**: 0.05 (5%)

## 5. 模型配置

- **类型**: lightgbm
- **参数**:
  - n_estimators: 1000
  - max_depth: 6
  - learning_rate: 0.05
  - num_leaves: 31
  - subsample: 0.8
  - colsample_bytree: 0.8
  - min_child_samples: 20
  - reg_alpha: 0.1
  - reg_lambda: 0.1
  - random_state: 42
  - verbose: -1

## 6. 评估结果（汇总）

| 指标               |      值 |
|:-----------------|-------:|
| accuracy         | 0.5859 |
| f1_binary        | 0.674  |
| precision_binary | 0.6981 |
| recall_binary    | 0.6514 |
| f1_macro         | 0.5533 |
| cohen_kappa      | 0.1084 |

## 7. Walk-Forward Fold 详情

- **方法**: walk_forward
- **初始训练集**: 1500
- **OOS窗口**: 63
- **步进**: 21
- **总 Fold 数**: 56

|   fold_id |   train_size |   test_size |   accuracy |   f1_binary |   precision_binary |   recall_binary |   f1_macro |   cohen_kappa |
|----------:|-------------:|------------:|-----------:|------------:|-------------------:|----------------:|-----------:|--------------:|
|    0.0000 |    1500.0000 |     63.0000 |     0.8095 |      0.8667 |             0.8667 |          0.8667 |     0.7667 |        0.5333 |
|    1.0000 |    1521.0000 |     63.0000 |     0.6825 |      0.6970 |             0.8846 |          0.5750 |     0.6818 |        0.3936 |
|    2.0000 |    1542.0000 |     63.0000 |     0.7619 |      0.8148 |             0.7857 |          0.8462 |     0.7407 |        0.4828 |
|    3.0000 |    1563.0000 |     63.0000 |     0.7143 |      0.7857 |             0.7021 |          0.8919 |     0.6786 |        0.3749 |
|    4.0000 |    1584.0000 |     63.0000 |     0.6349 |      0.7677 |             0.7755 |          0.7600 |     0.4579 |       -0.0838 |
|    5.0000 |    1605.0000 |     63.0000 |     0.4762 |      0.5823 |             1.0000 |          0.4107 |     0.4401 |        0.1341 |
|    6.0000 |    1626.0000 |     63.0000 |     0.2381 |      0.3333 |             1.0000 |          0.2000 |     0.2222 |        0.0233 |
|    7.0000 |    1647.0000 |     63.0000 |     0.4921 |      0.6444 |             0.9667 |          0.4833 |     0.3778 |        0.0261 |
|    8.0000 |    1668.0000 |     63.0000 |     0.7143 |      0.8302 |             0.8980 |          0.7719 |     0.4651 |       -0.0385 |
|    9.0000 |    1689.0000 |     63.0000 |     0.6508 |      0.7885 |             0.6613 |          0.9762 |     0.3942 |       -0.0312 |
|   10.0000 |    1710.0000 |     63.0000 |     0.3968 |      0.5581 |             0.3871 |          1.0000 |     0.3041 |        0.0197 |
|   11.0000 |    1731.0000 |     63.0000 |     0.4603 |      0.5526 |             0.4468 |          0.7241 |     0.4363 |       -0.0388 |
|   12.0000 |    1752.0000 |     63.0000 |     0.3968 |      0.4412 |             0.3947 |          0.5000 |     0.3930 |       -0.1946 |
|   13.0000 |    1773.0000 |     63.0000 |     0.7143 |      0.6538 |             0.6800 |          0.6296 |     0.7053 |        0.4112 |
|   14.0000 |    1794.0000 |     63.0000 |     0.8095 |      0.4545 |             0.3333 |          0.7143 |     0.6696 |        0.3571 |
|   15.0000 |    1815.0000 |     63.0000 |     0.8095 |      0.6667 |             0.6667 |          0.6667 |     0.7667 |        0.5333 |
|   16.0000 |    1836.0000 |     63.0000 |     0.7778 |      0.8000 |             0.8750 |          0.7368 |     0.7750 |        0.5541 |
|   17.0000 |    1857.0000 |     63.0000 |     0.8254 |      0.9027 |             0.9273 |          0.8793 |     0.5283 |        0.0622 |
|   18.0000 |    1878.0000 |     63.0000 |     0.6508 |      0.7885 |             0.9762 |          0.6613 |     0.3942 |       -0.0312 |
|   19.0000 |    1899.0000 |     63.0000 |     0.3175 |      0.4819 |             1.0000 |          0.3175 |     0.2410 |        0.0000 |
|   20.0000 |    1920.0000 |     63.0000 |     0.1746 |      0.1613 |             1.0000 |          0.0877 |     0.1744 |        0.0180 |
|   21.0000 |    1941.0000 |     63.0000 |     0.6190 |      0.7391 |             0.8500 |          0.6538 |     0.5166 |        0.0758 |
|   22.0000 |    1962.0000 |     63.0000 |     0.7937 |      0.8850 |             0.8197 |          0.9615 |     0.4425 |       -0.0568 |
|   23.0000 |    1983.0000 |     63.0000 |     0.7302 |      0.8440 |             0.9020 |          0.7931 |     0.4220 |       -0.1262 |
|   24.0000 |    2004.0000 |     63.0000 |     0.5556 |      0.7143 |             0.8750 |          0.6034 |     0.3571 |       -0.1499 |
|   25.0000 |    2025.0000 |     63.0000 |     0.6349 |      0.7416 |             0.8049 |          0.6875 |     0.5600 |        0.1329 |
|   26.0000 |    2046.0000 |     63.0000 |     0.6190 |      0.6364 |             0.7000 |          0.5833 |     0.6182 |        0.2432 |
|   27.0000 |    2067.0000 |     63.0000 |     0.4127 |      0.1778 |             1.0000 |          0.0976 |     0.3605 |        0.0702 |
|   28.0000 |    2088.0000 |     63.0000 |     0.4921 |      0.1579 |             0.7500 |          0.0882 |     0.3971 |        0.0500 |
|   29.0000 |    2109.0000 |     63.0000 |     0.6667 |      0.5116 |             0.9167 |          0.3548 |     0.6293 |        0.3267 |
|   30.0000 |    2130.0000 |     63.0000 |     0.4762 |      0.6374 |             0.4677 |          1.0000 |     0.3473 |        0.0271 |
|   31.0000 |    2151.0000 |     63.0000 |     0.6032 |      0.7059 |             0.5556 |          0.9677 |     0.5481 |        0.2152 |
|   32.0000 |    2172.0000 |     63.0000 |     0.7302 |      0.8317 |             0.7119 |          1.0000 |     0.5758 |        0.2388 |
|   33.0000 |    2193.0000 |     63.0000 |     0.7778 |      0.8600 |             0.7679 |          0.9773 |     0.6608 |        0.3571 |
|   34.0000 |    2214.0000 |     63.0000 |     0.8254 |      0.9009 |             0.9259 |          0.8772 |     0.5838 |        0.1720 |
|   35.0000 |    2235.0000 |     63.0000 |     0.6032 |      0.7423 |             1.0000 |          0.5902 |     0.4401 |        0.0838 |
|   36.0000 |    2256.0000 |     63.0000 |     0.4444 |      0.5977 |             1.0000 |          0.4262 |     0.3501 |        0.0450 |
|   37.0000 |    2277.0000 |     63.0000 |     0.3016 |      0.4211 |             1.0000 |          0.2667 |     0.2705 |        0.0335 |
|   38.0000 |    2298.0000 |     63.0000 |     0.7778 |      0.8571 |             0.9545 |          0.7778 |     0.6786 |        0.3797 |
|   39.0000 |    2319.0000 |     63.0000 |     0.7302 |      0.8411 |             0.7258 |          1.0000 |     0.4732 |        0.0775 |
|   40.0000 |    2340.0000 |     63.0000 |     0.5079 |      0.6353 |             0.4655 |          1.0000 |     0.4396 |        0.1215 |
|   41.0000 |    2361.0000 |     63.0000 |     0.4127 |      0.4932 |             0.3273 |          1.0000 |     0.3975 |        0.1100 |
|   42.0000 |    2382.0000 |     63.0000 |     0.2857 |      0.4156 |             0.2623 |          1.0000 |     0.2486 |        0.0221 |
|   43.0000 |    2403.0000 |     63.0000 |     0.7302 |      0.8132 |             0.6852 |          1.0000 |     0.6637 |        0.3834 |
|   44.0000 |    2424.0000 |     63.0000 |     0.5397 |      0.6742 |             0.8108 |          0.5769 |     0.4452 |       -0.0387 |
|   45.0000 |    2445.0000 |     63.0000 |     0.6984 |      0.8190 |             0.8113 |          0.8269 |     0.4571 |       -0.0852 |
|   46.0000 |    2466.0000 |     63.0000 |     0.5873 |      0.6829 |             0.7368 |          0.6364 |     0.5460 |        0.1010 |
|   47.0000 |    2487.0000 |     63.0000 |     0.3333 |      0.3438 |             0.5000 |          0.2619 |     0.3332 |       -0.2115 |
|   48.0000 |    2508.0000 |     63.0000 |     0.4286 |      0.0000 |             0.0000 |          0.0000 |     0.3000 |        0.0000 |
|   49.0000 |    2529.0000 |     63.0000 |     0.6349 |      0.3784 |             1.0000 |          0.2333 |     0.5600 |        0.2418 |
|   50.0000 |    2550.0000 |     63.0000 |     0.7460 |      0.6667 |             0.8000 |          0.5714 |     0.7308 |        0.4706 |
|   51.0000 |    2571.0000 |     63.0000 |     0.7143 |      0.8043 |             0.7551 |          0.8605 |     0.6375 |        0.2832 |
|   52.0000 |    2592.0000 |     63.0000 |     0.6984 |      0.7711 |             0.7805 |          0.7619 |     0.6646 |        0.3294 |
|   53.0000 |    2613.0000 |     63.0000 |     0.5079 |      0.6173 |             0.4464 |          1.0000 |     0.4642 |        0.1520 |
|   54.0000 |    2634.0000 |     63.0000 |     0.3016 |      0.3714 |             0.2281 |          1.0000 |     0.2929 |        0.0533 |
|   55.0000 |    2655.0000 |     63.0000 |     0.3810 |      0.5063 |             0.3390 |          1.0000 |     0.3383 |        0.0611 |

## 8. 分类报告

```
              precision    recall  f1-score   support

       负例(0)       0.41      0.46      0.43      1210
       正例(1)       0.70      0.65      0.67      2318

    accuracy                           0.59      3528
   macro avg       0.55      0.56      0.55      3528
weighted avg       0.60      0.59      0.59      3528

```

## 9. 混淆矩阵

|       |   非涨(0) |   大涨(1) |
|:------|--------:|--------:|
| 非涨(0) |     557 |     653 |
| 大涨(1) |     808 |    1510 |

## 10. Top 20 重要特征

| feature             |   importance |
|:--------------------|-------------:|
| dist_from_low_365d  |          611 |
| dist_from_low_90d   |          598 |
| vol_volatility_20   |          571 |
| dist_from_low_180d  |          565 |
| sma_cross_50_200    |          444 |
| trades_sma_20       |          443 |
| price_vs_sma_200    |          426 |
| vix_proxy_14        |          408 |
| fgi_ma_14           |          406 |
| low_50d_dist        |          398 |
| sma_200             |          396 |
| dist_from_high_180d |          392 |
| flow_momentum_5     |          383 |
| vix_proxy_change_7  |          383 |
| dist_from_low_30d   |          382 |
| obv                 |          379 |
| return_1d           |          370 |
| vix_proxy_60        |          367 |
| vol_price_corr_20   |          367 |
| obv_sma_20          |          366 |

## 附录: 完整配置

```yaml
experiment:
  name: weekly_bull_model
  description: '周线多头模型：预测未来4周涨幅超过5%的机会 (T=28, X=0.05). 标签映射: {0:0, 1:0, 2:1} → 1=大涨'
  tags:
  - weekly
  - bull
  - binary
  category: weekly
data:
  source: binance
  symbol: BTCUSDT
  interval: 1d
  start: '2018-01-01'
  end: '2025-12-31'
  path: data/raw/btc_binance_BTCUSDT_1d.csv
features:
  sets:
  - technical
  - volume
  - flow
  - sentiment
  drop_na_method: ffill_then_drop
  scaling: null
label:
  strategy: reversal
  T: 28
  X: 0.05
  map:
    0: 0
    1: 0
    2: 1
model:
  type: lightgbm
  params:
    n_estimators: 1000
    max_depth: 6
    learning_rate: 0.05
    num_leaves: 31
    subsample: 0.8
    colsample_bytree: 0.8
    min_child_samples: 20
    reg_alpha: 0.1
    reg_lambda: 0.1
    random_state: 42
    verbose: -1
evaluation:
  method: walk_forward
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
  - accuracy
  - f1_binary
  - precision_binary
  - recall_binary
  - f1_macro
  - cohen_kappa
seed: 42

```