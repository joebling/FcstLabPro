# ============================================================
# Weekly Bull Model v7c: å¤–éƒ¨æ•°æ® + reversal + ä¼˜åŒ–è°ƒå‚
# v7b è¯Šæ–­å‘ç°:
#   - early_stopping åœ¨å¾ˆå¤š fold ä¸­ best_iteration=1 (è¿‡æ—©åœæ­¢)
#   - å¤–éƒ¨æ•°æ®åŠ å…¥åç‰¹å¾æ•°ä» 127â†’219ï¼Œä½†æ•°æ®é‡å› å¤–éƒ¨æ•°æ®æ—¶é—´é™åˆ¶å‡å°‘
#   - æ¨¡å‹æ­£åˆ™åŒ–è¿‡å¼ºï¼Œæ— æ³•å……åˆ†åˆ©ç”¨å¤–éƒ¨ç‰¹å¾
#
# v7c ä¿®æ­£:
#   1. å…³é—­ early_stopping (åœ¨ 2000+ æ ·æœ¬ä¸Šä¸éœ€è¦)
#   2. æé«˜ learning_rate + å‡å°‘ n_estimators (é¿å…è¿‡æ‹Ÿåˆå¤§ç‰¹å¾ç©ºé—´)
#   3. å¢åŠ  colsample_bytree çš„éšæœºæ€§
#   4. å‡å¼±æ­£åˆ™åŒ– (è®©æ¨¡å‹èƒ½å­¦åˆ°å¤–éƒ¨ç‰¹å¾çš„ä¿¡å·)
#   5. ä¸ä½¿ç”¨ purge_gap (reversal æ ‡ç­¾å¯¹ purge ä¸æ•æ„Ÿ)
# ============================================================
experiment:
  name: "weekly_bull_v7c"
  description: "Bull v7c: å¤–éƒ¨æ•°æ®ä¼˜åŒ–ç‰ˆ â€” å…³é—­æ—©åœ, é€‚åº¦æ­£åˆ™"
  tags: ["weekly", "bull", "binary", "v7c", "external", "optimized"]
  category: "weekly"

data:
  path: "data/raw/btc_binance_BTCUSDT_1d.csv"

features:
  sets:
    - technical
    - volume
    - flow
    - market_structure
    - external
  selection:
    top_n: 60             # ğŸ†• ä» 219 ç‰¹å¾ä¸­é¢„ç­›é€‰ Top-60

label:
  strategy: "reversal"
  T: 14
  X: 0.05
  map:
    0: 0
    1: 0
    2: 1

model:
  type: "lightgbm"
  params:
    n_estimators: 800
    max_depth: 4            # ğŸ†• æ›´æµ…çš„æ ‘ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ
    learning_rate: 0.05
    num_leaves: 16          # ğŸ†• æ›´å°‘å¶å­
    subsample: 0.8
    colsample_bytree: 0.6   # ğŸ†• æ›´é«˜éšæœºæ€§
    min_child_samples: 30   # ğŸ†• æ›´ä¿å®ˆ
    reg_alpha: 0.1
    reg_lambda: 0.1
    min_split_gain: 0.01    # ğŸ†• æ›´é«˜åˆ†è£‚é˜ˆå€¼
    random_state: 42
    verbose: -1
    auto_scale_pos_weight: true
    # ä¸å¯ç”¨ early_stopping

evaluation:
  method: "walk_forward"
  init_train: 1500
  oos_window: 63
  step: 21
  metrics:
    - accuracy
    - f1_binary
    - precision_binary
    - recall_binary
    - f1_macro
    - cohen_kappa
