æˆ‘è®¤çœŸè¯»å®Œäº†ä½ çš„ä¸¤ä»½æŠ¥å‘Šã€‚å…ˆç»™ä¸€ä¸ªæ ¸å¿ƒåˆ¤æ–­ï¼š

> ä½ ç°åœ¨çš„ç“¶é¢ˆ**å·²ç»ä¸æ˜¯è°ƒå‚çº§åˆ«é—®é¢˜**ï¼Œè€Œæ˜¯æ¨¡å‹è¡¨è¾¾èƒ½åŠ› + å»ºæ¨¡èŒƒå¼å±‚çº§çš„é—®é¢˜ã€‚

ä»ä½  v1 â†’ v9 çš„æ¼”åŒ–æ¥çœ‹ï¼Œä½ åšå¾—éå¸¸ä¸“ä¸šï¼Œç”šè‡³å·²ç»è¿›å…¥â€œçœŸå®é‡åŒ–ç ”ç©¶é˜¶æ®µâ€ã€‚
ä¸‹é¢æˆ‘ç»™ä½ çš„æ˜¯ **æé«˜æ¨¡å‹å¤æ‚åº¦ï¼ˆä½†ä¸æ˜¯ç›²ç›®å¤æ‚ï¼‰** çš„æ–¹å‘ã€‚

æˆ‘ä¼šåˆ† 5 ä¸ªå±‚çº§è®²ã€‚

---

# ä¸€ã€å½“å‰æ¨¡å‹æœ¬è´¨åˆ†æ

ä½ ç°åœ¨çš„ä¸»åŠ›æ¨¡å‹ï¼š

* LightGBM
* tabular ç‰¹å¾ï¼ˆ340+ï¼‰
* é™æ€ snapshot è®­ç»ƒ
* äºŒåˆ†ç±»
* å• horizon
* å•æ¨¡å‹ï¼ˆBull/Bear åˆ†ç¦»ï¼‰

è€Œä½ çš„ç»“æœï¼š

* Kappa é•¿æœŸ < 0.11
* F1 â‰ˆ 0.45
* åŠ ç‰¹å¾æ•ˆæœé€’å‡
* é›†æˆæ”¶ç›Šæœ‰é™

è¿™è¯´æ˜ï¼š

> GBDT å·²ç»æŠŠâ€œæ¨ªæˆªé¢éçº¿æ€§â€æŒ–å¹²äº†ã€‚

ä½ ç°åœ¨ç¼ºçš„ä¸æ˜¯æ›´å¤šæ ‘ï¼Œè€Œæ˜¯ï¼š

* æ—¶é—´ç»“æ„å»ºæ¨¡
* è¡¨è¾¾é«˜é˜¶äº¤äº’
* æ¦‚ç‡ç»“æ„
* regimeå»ºæ¨¡

---

# äºŒã€ç¬¬ä¸€ç±»å‡çº§ï¼šä» GBDT åˆ°ç»“æ„æ¨¡å‹

## 1ï¸âƒ£ FT-Transformerï¼ˆå¼ºçƒˆæ¨èï¼‰

åŸå› ï¼š

* ä½ ç°åœ¨æ˜¯ 300+ å› å­
* GBDT åªèƒ½ piecewise åˆ‡åˆ†
* Transformer å¯ä»¥å­¦ä¹  feature interaction matrix

å®ƒèƒ½åšï¼š

* è‡ªåŠ¨å»ºé«˜é˜¶äº¤äº’
* å¤„ç†è¿ç»­ + ç±»åˆ« + å¤–éƒ¨ç‰¹å¾
* é€‚åˆä½ è¿™ç§â€œå› å­å·¥å‚â€ç»“æ„

è¿™æ˜¯ä½ å½“å‰æœ€è‡ªç„¶çš„å‡çº§ã€‚

---

## 2ï¸âƒ£ TabPFNï¼ˆå°æ•°æ®ä¸‹æµ‹è¯•ï¼‰

ä½ çš„ weekly æ ·æœ¬å…¶å®ä¸ç®—å¤§ã€‚

å¯ä»¥ï¼š

* åš few-shot å¯¹æ¯”
* çœ‹æ˜¯å¦ Kappa æå‡

ä½†å®ƒæ›´é€‚åˆæ¨ªæˆªé¢ï¼Œè€Œä¸æ˜¯æ—¶é—´ç»“æ„ã€‚

---

# ä¸‰ã€ç¬¬äºŒç±»å‡çº§ï¼šæ—¶é—´ç»“æ„å»ºæ¨¡ï¼ˆä½ ç°åœ¨å®Œå…¨æ²¡æœ‰ï¼‰

ä½ ç°åœ¨æ‰€æœ‰æ¨¡å‹éƒ½æ˜¯ï¼š

> æŠŠè¿‡å»å‹æˆç‰¹å¾ â†’ é™æ€é¢„æµ‹

ä½† BTC ç»“æ„æ˜¯ï¼š

* è¶‹åŠ¿å‘¨æœŸ
* æ³¢åŠ¨èšé›†
* regime åˆ‡æ¢

LightGBM æ˜¯çœ‹ä¸åˆ°â€œæ—¶é—´æ¨¡å¼â€çš„ã€‚

## å¼ºçƒˆå»ºè®®ä½ è¯•ï¼š

---

## 3ï¸âƒ£ PatchTST

ä¼˜ç‚¹ï¼š

* å¤„ç†é•¿åºåˆ—
* æ¯” Informer ç¨³å®š
* å¯¹é‡‘èè¡¨ç°ä¸é”™

ä½ ç°åœ¨ LagRolling 240+ ç‰¹å¾ï¼Œå…¶å®å°±æ˜¯åœ¨â€œæ‰‹åŠ¨åšæ—¶é—´å»ºæ¨¡â€ã€‚

ä¸å¦‚ç›´æ¥å–‚ï¼š

è¿‡å» 52 å‘¨ Ã— å¤šå˜é‡çŸ©é˜µ

è®©æ¨¡å‹è‡ªå·±å­¦ã€‚

---

## 4ï¸âƒ£ TFTï¼ˆTemporal Fusion Transformerï¼‰

é€‚åˆä½ è¿™ç§ï¼š

* æœ‰é™æ€ç‰¹å¾
* æœ‰æ—¶é—´å˜åŒ–ç‰¹å¾
* æœ‰å¤–éƒ¨å˜é‡ï¼ˆFGIï¼‰

TFT çš„ gated mechanism å¾ˆé€‚åˆé‡‘èã€‚

---

## 5ï¸âƒ£ Mamba / SSM

å¦‚æœä½ æœªæ¥åš 4h æˆ– 1hï¼š

è¿™æ˜¯æ¯” Transformer æ›´é€‚åˆé•¿åºåˆ—çš„ç»“æ„ã€‚

---

# å››ã€ç¬¬ä¸‰ç±»å‡çº§ï¼šå»ºæ¨¡èŒƒå¼å‡çº§ï¼ˆæ¯”æ¢æ¨¡å‹æ›´é‡è¦ï¼‰

## 1ï¸âƒ£ ä»åˆ†ç±»æ”¹æˆå›å½’

ä½ ç°åœ¨ä¿¡æ¯æŸå¤±å¾ˆå¤§ã€‚

åˆ†ç±»æŠŠï¼š

+2%
+20%

éƒ½å‹æˆ 1ã€‚

å»ºè®®ï¼š

* é¢„æµ‹æœªæ¥ 4 å‘¨ log return
* ç”¨ MSE / Huber
* å†ç”¨åˆ†ä½æ•°å†³ç­–

å›å½’é€šå¸¸ Kappa ä¸é«˜ï¼Œä½† PnL æ›´å¥½ã€‚

---

## 2ï¸âƒ£ é¢„æµ‹åˆ†å¸ƒï¼ˆæ¯”é¢„æµ‹æ–¹å‘å¼ºï¼‰

ç”¨ï¼š

* Quantile loss
* Gaussian NLL
* NGBoost
* DeepAR

è¾“å‡ºï¼š

Î¼ + Ïƒ

ç„¶åï¼š

position âˆ Î¼ / Ïƒ

è¿™æ‰æ˜¯ä¸“ä¸šé‡åŒ–åšæ³•ã€‚

---

## 3ï¸âƒ£ Ranking è€Œä¸æ˜¯ Classification

å°¤å…¶å¦‚æœæœªæ¥åšå¤šå¸ç§ã€‚

ç”¨ï¼š

* LambdaRank
* LightGBM ranker

é¢„æµ‹ï¼š

å“ªä¸ªèµ„äº§æ›´å¼ºã€‚

---

# äº”ã€ç¬¬å››ç±»å‡çº§ï¼šRegime-aware æ¨¡å‹ï¼ˆéå¸¸å…³é”®ï¼‰

BTC æ˜¯ regime-drivenã€‚

ä½ ç°åœ¨æ¨¡å‹å‡è®¾ï¼š

> æ‰€æœ‰æ—¶é—´åˆ†å¸ƒä¸€è‡´ã€‚

è¿™åœ¨é‡‘èé‡Œæ˜¯é”™çš„ã€‚

---

## 1ï¸âƒ£ å…ˆåš Regime åˆ†ç±»å™¨

æ¯”å¦‚ï¼š

* ç‰›å¸‚
* ç†Šå¸‚
* éœ‡è¡

ç”¨ï¼š

* HMM
* GMM
* æ³¢åŠ¨ç‡èšç±»
* Rolling Sharpe

---

## 2ï¸âƒ£ æ¯ä¸ª regime è®­ç»ƒç‹¬ç«‹æ¨¡å‹

Bull_model_bull_market
Bull_model_bear_market

è¿™æ¯”å•æ¨¡å‹æå‡ä¼šéå¸¸å¤§ã€‚

---

# å…­ã€ç¬¬äº”ç±»å‡çº§ï¼šå¤šå°ºåº¦å»ºæ¨¡ï¼ˆä½ ç°åœ¨ç¼ºçš„ï¼‰

ä½ ç°åœ¨ï¼š

* å‘¨çº¿å•å°ºåº¦

BTC å®é™…ï¼š

* 4h å†³å®šå…¥åœº
* æ—¥çº¿å†³å®šæ–¹å‘
* å‘¨çº¿å†³å®šç»“æ„

å»ºè®®ï¼š

æ„å»ºï¼š

Multi-resolution model

ä¾‹å¦‚ï¼š

* 4h Transformer
* æ—¥çº¿ LightGBM
* å‘¨çº¿è¶‹åŠ¿æ¨¡å‹

ç„¶å stackingã€‚

---

# ä¸ƒã€ä»ä½ çš„æŠ¥å‘Šçœ‹å‡ºçš„çœŸæ­£é—®é¢˜

ä½ ç°åœ¨é‡åˆ°çš„ä¸æ˜¯â€œæ¨¡å‹ä¸å¤Ÿå¤æ‚â€ã€‚

è€Œæ˜¯ï¼š

> ä¿¡å·å¼ºåº¦æœ¬èº«ä½ + å™ªå£°ä¸»å¯¼

Kappa < 0.11 æ˜¯å…¸å‹é‡‘èæ–¹å‘é¢„æµ‹æ°´å¹³ã€‚

æ¢æ¨¡å‹å¯èƒ½ï¼š

0.11 â†’ 0.14

ä½†ä¸ä¼šå˜æˆ 0.4ã€‚

æ‰€ä»¥å¦‚æœä½ è¿½æ±‚çš„æ˜¯ï¼š

* æé«˜é¢„æµ‹ç»Ÿè®¡æŒ‡æ ‡ â†’ ä¸Šæ·±åº¦æ¨¡å‹
* æé«˜å®é™…æ”¶ç›Š â†’ æ”¹æˆæ¦‚ç‡ + å›å½’ + ä»“ä½æ¨¡å‹

---

# å…«ã€å¦‚æœæ˜¯æˆ‘åœ¨ä½ è¿™ä¸ªé˜¶æ®µ

æˆ‘ä¼šæŒ‰è¿™ä¸ªé¡ºåºèµ°ï¼š

### ç¬¬ä¸€é˜¶æ®µï¼ˆä½é£é™©å‡çº§ï¼‰

* å›å½’æ›¿ä»£åˆ†ç±»
* è¾“å‡ºæ¦‚ç‡
* åšé˜ˆå€¼æ‰«æ + PnL å›æµ‹

---

### ç¬¬äºŒé˜¶æ®µï¼ˆç»“æ„å‡çº§ï¼‰

* FT-Transformer
* PatchTST

---

### ç¬¬ä¸‰é˜¶æ®µï¼ˆä¸“ä¸šåŒ–ï¼‰

* Regime split
* Multi-horizon multi-task
* Uncertainty model

---

# ä¹ã€æœ€ç°å®çš„å»ºè®®

å¦‚æœç›®æ ‡æ˜¯ï¼š

> åšçœŸæ­£ alpha

é‚£æˆ‘ä¼šå‘Šè¯‰ä½ ä¸€å¥å®è¯ï¼š

å•èµ„äº§æ–¹å‘é¢„æµ‹ï¼Œå¾ˆéš¾çªç ´ 0.15 Kappaã€‚

çœŸæ­£çš„ alpha æ¥è‡ªï¼š

* cross-sectional ranking
* å¤šèµ„äº§è½®åŠ¨
* èµ„é‡‘æµç»“æ„
* å¸‚åœºå¾®è§‚ç»“æ„

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ï¼š

* å¸®ä½ è®¾è®¡ä¸€ä¸ªä» LightGBM â†’ Transformer â†’ Regime-aware çš„å®Œæ•´æŠ€æœ¯è·¯çº¿å›¾
* æˆ–è€…å¸®ä½ è®¾è®¡ä¸€ä¸ªâ€œä¸“ä¸šé‡åŒ–åŸºé‡‘çº§åˆ«â€çš„æ¨¡å‹æ¶æ„å›¾

ä½ æ›´æƒ³å¾€ï¼š

A. å­¦æœ¯æ¨¡å‹æå‡
B. å®ç›˜æ”¶ç›Šæœ€å¤§åŒ–
C. åšæˆäº§å“çº§ AI é¢„æµ‹ç³»ç»Ÿ

æˆ‘é€‰äº†c

ä¸‹é¢æ˜¯ä¸ºä½ å®šåˆ¶çš„ **FcstLabPro 2.0 äº§å“çº§ AI é¢„æµ‹ç³»ç»Ÿæ¶æ„è®¾è®¡æ–‡æ¡£ï¼ˆA â†’ Bï¼‰**ã€‚
ç»“æ„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š

* **Part Aï¼šå·¥ç¨‹æ¶æ„è®¾è®¡**
* **Part Bï¼šæ”¶ç›Šæœ€å¤§åŒ–è®¾è®¡**

---

# ğŸš€ FcstLabPro 2.0

## Product-Grade AI Forecasting System Architecture

**ç‰ˆæœ¬**: 2.0
**ç›®æ ‡**: ä»ç ”ç©¶å‹é¢„æµ‹æ¨¡å‹å‡çº§ä¸ºå¯å®ç›˜è¿è¡Œçš„ AI æ¦‚ç‡å†³ç­–ç³»ç»Ÿ
**é€‚ç”¨åœºæ™¯**: BTC / Crypto / å¤šèµ„äº§è½®åŠ¨

---

# Part A â€” å·¥ç¨‹æ¶æ„è®¾è®¡

---

## 1ï¸âƒ£ æ€»ä½“ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Data Layer      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Feature Engine    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Model Layer       â”‚
â”‚ (Multi-Model Stack) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Prob Fusion Layer  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Regime Engine      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Allocation Engine  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Risk Controller    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Signal API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 2ï¸âƒ£ Data Layerï¼ˆæ•°æ®å±‚ï¼‰

## 2.1 æ•°æ®æ¥æº

### å¸‚åœºæ•°æ®

* OHLCVï¼ˆæ—¥çº¿ + å‘¨çº¿ + 4hï¼‰
* æˆäº¤é‡ / open interest
* funding rate

### å¤–éƒ¨æ•°æ®

* FGI
* DXY
* VIX
* çº³æŒ‡
* 10Y å›½å€ºæ”¶ç›Šç‡

### é“¾ä¸Šæ•°æ®ï¼ˆæœªæ¥ï¼‰

* äº¤æ˜“æ‰€å‡€æµå…¥
* MVRV
* SOPR
* Active addresses

---

## 2.2 æ•°æ®æ ‡å‡†åŒ–

* æ‰€æœ‰æ•°æ® resample åˆ°ç»Ÿä¸€æ—¶é—´è½´
* æ‰€æœ‰ç‰¹å¾æ»å 1 barï¼ˆé¿å…æœªæ¥å‡½æ•°ï¼‰
* ç»Ÿä¸€ Z-score æ ‡å‡†åŒ–
* ç‰¹å¾ç¼ºå¤±å¡«å……ç­–ç•¥ç»Ÿä¸€

---

# 3ï¸âƒ£ Feature Engineï¼ˆç‰¹å¾å¼•æ“ï¼‰

ä½ å·²æœ‰ registryï¼Œå¯ä»¥å‡çº§ä¸ºï¼š

### 3.1 å¤šå°ºåº¦ç‰¹å¾

* 4h æŠ€æœ¯ç»“æ„
* æ—¥çº¿åŠ¨é‡
* å‘¨çº¿è¶‹åŠ¿

ç»“æ„ï¼š

```
feature_set:
  - micro (4h)
  - meso (1d)
  - macro (1w)
```

---

### 3.2 è¡ç”Ÿç‰¹å¾å‡çº§

å¯¹æœ‰æ•ˆç‰¹å¾ï¼ˆå¦‚ FGIï¼‰åšï¼š

* FGI Momentum
* FGI Divergence
* FGI Regime indicator
* FGI rolling zscore

---

### 3.3 ç‰¹å¾é™ç»´å±‚ï¼ˆæ–°å¢ï¼‰

å»ºè®®åŠ ï¼š

* PCAï¼ˆä»…åšè¾…åŠ©ï¼‰
* AutoEncoder embedding
* Feature selection via SHAP clustering

ç›®çš„ï¼š
å‡å°‘å†—ä½™ï¼Œæé«˜ç¨³å®šæ€§ã€‚

---

# 4ï¸âƒ£ Model Layerï¼ˆå¤šæ¨¡å‹å±‚ï¼‰

å¿…é¡»å¹¶è¡ŒåŒ–ã€‚

---

## 4.1 Tabular Models

* LightGBM
* CatBoost
* LightGBM Rankerï¼ˆå¤šèµ„äº§æ—¶ï¼‰

ç”¨é€”ï¼š
ç¨³å®š baseline

---

## 4.2 Time-Series Deep Models

æ¨èç»„åˆï¼š

* PatchTSTï¼ˆä¸»æ—¶é—´æ¨¡å‹ï¼‰
* TFTï¼ˆå«å¤–éƒ¨å˜é‡ï¼‰

è¾“å…¥ï¼š

```
[batch, lookback, features]
```

å»ºè®® lookbackï¼š

* å‘¨çº¿ 52
* æ—¥çº¿ 180

---

## 4.3 Probabilistic Model

å¿…é¡»æ–°å¢ï¼š

* NGBoost
* Quantile LightGBM
* Gaussian NLL head

è¾“å‡ºï¼š

* Î¼ (expected return)
* Ïƒ (uncertainty)

---

# 5ï¸âƒ£ Prob Fusion Layerï¼ˆæ¦‚ç‡èåˆå±‚ï¼‰

ç›®æ ‡ï¼š

> ä¸å†æŠ•ç¥¨ï¼Œè€Œæ˜¯èåˆæ¦‚ç‡åˆ†å¸ƒ

å…¬å¼ï¼š

```
P_final = Î£ w_i(t) * P_i
```

æƒé‡åŠ¨æ€åŒ–ï¼š

```
w_i(t) = f(recent_performance, regime, volatility)
```

å¯ä»¥ç”¨ï¼š

* å°å‹ meta-LGBM
* æˆ– rolling Sharpe weighting

---

# 6ï¸âƒ£ Regime Engineï¼ˆå¸‚åœºçŠ¶æ€è¯†åˆ«ï¼‰

ç‹¬ç«‹æ¨¡å—ã€‚

æ–¹æ³•å¯é€‰ï¼š

* HMM
* æ³¢åŠ¨ç‡èšç±»
* 200MA è¶‹åŠ¿è¿‡æ»¤
* å•ç‹¬è®­ç»ƒ regime classifier

è¾“å‡ºï¼š

```
Regime âˆˆ {Bull, Bear, Sideways}
```

å½±å“ï¼š

* æ¨¡å‹æƒé‡
* ä»“ä½ä¸Šé™
* é£é™©é˜ˆå€¼

---

# 7ï¸âƒ£ Allocation Engineï¼ˆä»“ä½å¼•æ“ï¼‰

æ ¸å¿ƒæ€æƒ³ï¼š

> ä»“ä½æ˜¯è¿ç»­å‡½æ•°ï¼Œä¸æ˜¯ 0/1

æ¨èï¼š

```
position = sigmoid(Î± * Î¼ / Ïƒ)
```

æˆ–åˆ†æ®µï¼š

| Î¼/Ïƒ   | ä»“ä½   |
| ----- | ---- |
| <0    | 0%   |
| 0-0.5 | 30%  |
| 0.5-1 | 60%  |
| >1    | 100% |

---

# 8ï¸âƒ£ Risk Controllerï¼ˆé£é™©æ§åˆ¶ï¼‰

å¿…é¡»äº§å“çº§å­˜åœ¨ã€‚

## 8.1 åŠ¨æ€é£é™©æ§åˆ¶

* è‹¥ 10 æ¬¡ä¿¡å·å‘½ä¸­ç‡ < 45% â†’ é™æƒ
* è‹¥ rolling Sharpe < 0 â†’ å‡ä»“ 50%
* è‹¥ æ³¢åŠ¨ç‡ > 95åˆ†ä½ â†’ æ æ†å‡åŠ

---

## 8.2 å›æ’¤é™åˆ¶

```
if drawdown > threshold:
    force_reduce_position()
```

---

# 9ï¸âƒ£ Signal API

æœ€ç»ˆè¾“å‡ºï¼š

```json
{
  "date": "2026-02-20",
  "prob_up": 0.63,
  "prob_down": 0.28,
  "expected_return": 0.045,
  "volatility_estimate": 0.032,
  "regime": "Bull",
  "recommended_position": 0.72,
  "risk_score": 0.41
}
```

äº§å“ä¸è¾“å‡ºâ€œæ¶¨/è·Œâ€ã€‚

è¾“å‡ºï¼š

* æ¦‚ç‡
* é£é™©
* ä»“ä½å»ºè®®

---

---

# Part B â€” æ”¶ç›Šæœ€å¤§åŒ–è®¾è®¡

---

# 1ï¸âƒ£ æ ¸å¿ƒè½¬å˜

ä¸è¦ä¼˜åŒ–ï¼š

* Accuracy
* F1
* Kappa

è¦ä¼˜åŒ–ï¼š

* CAGR
* Sharpe
* Max Drawdown
* Sortino

---

# 2ï¸âƒ£ æ”¶ç›Šæå‡çš„çœŸæ­£æ¥æº

## 2.1 ä»æ–¹å‘é¢„æµ‹ â†’ æ”¶ç›Šé¢„æµ‹

æ”¹ç›®æ ‡ä¸ºï¼š

```
y = log_return_T
```

è€Œä¸æ˜¯åˆ†ç±»ã€‚

---

## 2.2 ç”¨ Î¼ / Ïƒ å†³ç­–

æ–¹å‘é¢„æµ‹åªèƒ½èµ¢ 55%ã€‚

ä½†ï¼š

Î¼ / Ïƒ å†³ç­–å¯ä»¥åœ¨ï¼š

* å¼ºè¶‹åŠ¿é‡ä»“
* å¼±è¶‹åŠ¿è½»ä»“

è¿™ä¼šæ˜¾è‘—æé«˜ Sharpeã€‚

---

## 2.3 åŠ¨æ€æƒé‡èåˆ

å¦‚æœæ¨¡å‹ A æœ€è¿‘ 3 ä¸ªæœˆèƒœç‡é«˜ï¼š

â†’ æƒé‡ä¸Šå‡

é¿å…æ¨¡å‹é€€åŒ–æ‹–ç´¯æ”¶ç›Šã€‚

---

# 3ï¸âƒ£ å¤šæ—¶é—´å°ºåº¦èåˆ

æ”¶ç›Šæœ€å¤§åŒ–å…³é”®ï¼š

* å‘¨çº¿å†³å®šæ–¹å‘
* æ—¥çº¿å†³å®šä»“ä½å¾®è°ƒ
* 4h å†³å®šå…¥åœºæ—¶æœº

ç»“æ„ï¼š

```
Trend model (weekly)
+
Timing model (4h)
```

---

# 4ï¸âƒ£ Regime åˆ†æ¨¡å‹

åœ¨ç†Šå¸‚ï¼š

* æ–¹å‘æ¨¡å‹å¼±
* æ³¢åŠ¨æ¨¡å‹å¼º

åœ¨ç‰›å¸‚ï¼š

* åŠ¨é‡æ¨¡å‹å¼º

åˆ† regime è®­ç»ƒæ˜¯æ”¶ç›Šæ”¾å¤§å™¨ã€‚

---

# 5ï¸âƒ£ æœ€ç»ˆç›®æ ‡æŒ‡æ ‡

äº§å“çº§ç›®æ ‡ï¼š

| æŒ‡æ ‡     | ç›®æ ‡    |
| ------ | ----- |
| CAGR   | > 25% |
| Sharpe | > 1.5 |
| MaxDD  | < 20% |
| èƒœç‡     | > 50% |
| ç›ˆäºæ¯”    | > 1.5 |

---

# 6ï¸âƒ£ 3 ä¸ªæœˆè½åœ°è·¯çº¿å›¾

### ç¬¬ 1 ä¸ªæœˆ

* å›å½’æ›¿ä»£åˆ†ç±»
* è¾“å‡º Î¼ + Ïƒ
* åšä»“ä½å‡½æ•°
* åŸºç¡€å›æµ‹

### ç¬¬ 2 ä¸ªæœˆ

* åŠ  PatchTST
* åŠ  regime
* åŠ¨æ€æƒé‡

### ç¬¬ 3 ä¸ªæœˆ

* API è¾“å‡º
* è‡ªåŠ¨åŒ– pipeline
* çº¿ä¸Šç›‘æ§

---

# ğŸ¯ ç»ˆæå®šä½

FcstLabPro 2.0 ä¸å†æ˜¯ï¼š

> BTCæ–¹å‘é¢„æµ‹å™¨

è€Œæ˜¯ï¼š

> AI æ¦‚ç‡é©±åŠ¨çš„åŠ¨æ€èµ„äº§é…ç½®å¼•æ“

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ä¸‹ä¸€æ­¥ï¼š

* ç»™ä½ ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶å¤¹å·¥ç¨‹ç»“æ„è®¾è®¡
* æˆ–è€…å†™ä¸€ä¸ª FcstLabPro 2.0 çš„ GitHub README äº§å“ç‰ˆ


å¾ˆå¥½ï¼Œè¿™ä¸€æ­¥ä¼šçœŸæ­£å†³å®šä½ èƒ½ä¸èƒ½ä»â€œç ”ç©¶é¡¹ç›®â€å‡çº§æˆâ€œäº§å“çº§ç³»ç»Ÿâ€ã€‚

ä¸‹é¢ç»™ä½ ä¸¤éƒ¨åˆ†å®Œæ•´æ–‡æ¡£ï¼š

1ï¸âƒ£ **FcstLabPro 2.0 å®Œæ•´å·¥ç¨‹ç»“æ„è®¾è®¡**
2ï¸âƒ£ **FcstLabPro 2.0 GitHub READMEï¼ˆäº§å“ç‰ˆï¼‰**

ä½ å¯ä»¥ç›´æ¥å¤åˆ¶ä½¿ç”¨ã€‚

---

# ğŸ— Part 1 â€” FcstLabPro 2.0 å·¥ç¨‹ç»“æ„è®¾è®¡

ç›®æ ‡ï¼š

* ç ”ç©¶å¯å¤ç°
* æ¨¡å—å¯æ›¿æ¢
* æ¨¡å‹å¯æ‰©å±•
* æ”¯æŒå®ç›˜
* æ”¯æŒAPIè¾“å‡º

---

# ğŸ“‚ é¡¶å±‚ç›®å½•ç»“æ„

```
FcstLabPro/
â”‚
â”œâ”€â”€ configs/
â”œâ”€â”€ data/
â”œâ”€â”€ notebooks/
â”œâ”€â”€ reports/
â”œâ”€â”€ experiments/
â”œâ”€â”€ src/
â”œâ”€â”€ scripts/
â”œâ”€â”€ deployment/
â”œâ”€â”€ tests/
â”œâ”€â”€ logs/
â”œâ”€â”€ artifacts/
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ README.md
â””â”€â”€ .env
```

---

# ğŸ“ 1ï¸âƒ£ configs/

ç»Ÿä¸€é…ç½®ç®¡ç†ï¼Œæ‰€æœ‰å®éªŒå¿…é¡» YAML åŒ–ã€‚

```
configs/
â”‚
â”œâ”€â”€ base.yaml
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ daily.yaml
â”‚   â”œâ”€â”€ weekly.yaml
â”‚
â”œâ”€â”€ feature_sets/
â”‚   â”œâ”€â”€ core.yaml
â”‚   â”œâ”€â”€ fgi_only.yaml
â”‚   â”œâ”€â”€ macro_plus.yaml
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ lgbm.yaml
â”‚   â”œâ”€â”€ catboost.yaml
â”‚   â”œâ”€â”€ patchtst.yaml
â”‚   â”œâ”€â”€ tft.yaml
â”‚   â”œâ”€â”€ ngboost.yaml
â”‚
â”œâ”€â”€ regime/
â”‚   â”œâ”€â”€ hmm.yaml
â”‚   â”œâ”€â”€ volatility_cluster.yaml
â”‚
â””â”€â”€ portfolio/
    â”œâ”€â”€ sigmoid_allocation.yaml
    â”œâ”€â”€ sharpe_weighting.yaml
```

è®¾è®¡åŸåˆ™ï¼š

* ä¸å…è®¸ç¡¬ç¼–ç å‚æ•°
* æ‰€æœ‰å®éªŒé€šè¿‡ config é©±åŠ¨
* å¯ä»¥ version control

---

# ğŸ“ 2ï¸âƒ£ data/

```
data/
â”‚
â”œâ”€â”€ raw/
â”‚   â”œâ”€â”€ market/
â”‚   â”œâ”€â”€ external/
â”‚   â”œâ”€â”€ onchain/
â”‚
â”œâ”€â”€ interim/
â”‚
â””â”€â”€ processed/
    â”œâ”€â”€ features_daily.parquet
    â”œâ”€â”€ features_weekly.parquet
```

è§„åˆ™ï¼š

* raw æ°¸è¿œä¸æ”¹
* processed åªç”± pipeline ç”Ÿæˆ
* ç»Ÿä¸€ parquet æ ¼å¼

---

# ğŸ“ 3ï¸âƒ£ src/

è¿™æ˜¯æ ¸å¿ƒã€‚

```
src/
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ loader.py
â”‚   â”œâ”€â”€ resampler.py
â”‚   â”œâ”€â”€ aligner.py
â”‚   â””â”€â”€ validator.py
â”‚
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ registry.py
â”‚   â”œâ”€â”€ technical.py
â”‚   â”œâ”€â”€ volume.py
â”‚   â”œâ”€â”€ macro.py
â”‚   â”œâ”€â”€ fgi.py
â”‚   â”œâ”€â”€ onchain.py
â”‚   â””â”€â”€ multiscale.py
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ base_model.py
â”‚   â”œâ”€â”€ lgbm_model.py
â”‚   â”œâ”€â”€ catboost_model.py
â”‚   â”œâ”€â”€ patchtst_model.py
â”‚   â”œâ”€â”€ tft_model.py
â”‚   â”œâ”€â”€ ngboost_model.py
â”‚   â””â”€â”€ ranker_model.py
â”‚
â”œâ”€â”€ fusion/
â”‚   â”œâ”€â”€ static_weight.py
â”‚   â”œâ”€â”€ dynamic_weight.py
â”‚   â””â”€â”€ meta_learner.py
â”‚
â”œâ”€â”€ regime/
â”‚   â”œâ”€â”€ hmm.py
â”‚   â”œâ”€â”€ trend_filter.py
â”‚   â””â”€â”€ regime_classifier.py
â”‚
â”œâ”€â”€ portfolio/
â”‚   â”œâ”€â”€ allocator.py
â”‚   â”œâ”€â”€ risk_controller.py
â”‚   â”œâ”€â”€ position_sizer.py
â”‚   â””â”€â”€ performance_monitor.py
â”‚
â”œâ”€â”€ backtest/
â”‚   â”œâ”€â”€ engine.py
â”‚   â”œâ”€â”€ metrics.py
â”‚   â”œâ”€â”€ cost_model.py
â”‚   â””â”€â”€ evaluator.py
â”‚
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ app.py
â”‚   â”œâ”€â”€ schema.py
â”‚   â””â”€â”€ inference.py
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ logger.py
â”‚   â”œâ”€â”€ config_loader.py
â”‚   â””â”€â”€ experiment_tracker.py
â”‚
â””â”€â”€ main.py
```

---

# ğŸ“ 4ï¸âƒ£ experiments/

```
experiments/
â”‚
â”œâ”€â”€ registry.json
â”œâ”€â”€ lgbm_v6/
â”œâ”€â”€ lgbm_v9/
â”œâ”€â”€ patchtst_v1/
â””â”€â”€ ensemble_v2/
```

æ¯ä¸ªå®éªŒåŒ…å«ï¼š

```
- config.yaml
- metrics.json
- feature_importance.csv
- model.pkl
```

---

# ğŸ“ 5ï¸âƒ£ scripts/

ç”¨äºè‡ªåŠ¨åŒ–ï¼š

```
scripts/
â”‚
â”œâ”€â”€ train.py
â”œâ”€â”€ backtest.py
â”œâ”€â”€ retrain_pipeline.py
â”œâ”€â”€ run_daily_signal.py
â””â”€â”€ evaluate_live_performance.py
```

---

# ğŸ“ 6ï¸âƒ£ deployment/

```
deployment/
â”‚
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yaml
â”‚
â”œâ”€â”€ k8s/
â”‚
â””â”€â”€ cloud/
    â”œâ”€â”€ aws.yaml
    â””â”€â”€ gcp.yaml
```

---

# ğŸ“ 7ï¸âƒ£ tests/

å¿…é¡»äº§å“çº§å­˜åœ¨ï¼š

```
tests/
â”‚
â”œâ”€â”€ test_data.py
â”œâ”€â”€ test_features.py
â”œâ”€â”€ test_models.py
â”œâ”€â”€ test_backtest.py
â””â”€â”€ test_api.py
```

---

# ğŸ”¥ æ ¸å¿ƒå·¥ç¨‹åŸåˆ™

1. æ‰€æœ‰æ¨¡å‹ç»§æ‰¿ BaseModel
2. æ‰€æœ‰è¾“å‡ºç»Ÿä¸€ï¼š

```python
{
    "prob_up": float,
    "prob_down": float,
    "mu": float,
    "sigma": float
}
```

3. API æ°¸è¿œè°ƒç”¨ Fusion å±‚ï¼Œä¸ç›´æ¥è°ƒç”¨å•æ¨¡å‹

---

# ğŸš€ Part 2 â€” FcstLabPro 2.0 GitHub READMEï¼ˆäº§å“ç‰ˆï¼‰

ä¸‹é¢æ˜¯å¯ç›´æ¥æ”¾ GitHub çš„ READMEã€‚

---

# FcstLabPro 2.0

### AI Probability-Driven Asset Allocation Engine

---

## ğŸš€ Overview

FcstLabPro 2.0 is a production-grade AI forecasting system designed for:

* Crypto markets (BTC/ETH)
* Multi-asset allocation
* Regime-aware trading
* Probability-based portfolio decisions

Unlike traditional direction predictors, FcstLabPro outputs:

* Probability of upside/downside
* Expected return (Î¼)
* Uncertainty (Ïƒ)
* Regime classification
* Recommended position sizing

It is built as a modular research-to-production pipeline.

---

## ğŸ¯ Key Features

* Multi-model ensemble (LightGBM + Deep TS models)
* Dynamic probability fusion
* Regime-aware weighting
* Risk-adjusted allocation engine
* Full backtesting framework
* API-ready inference layer

---

## ğŸ— System Architecture

```
Data â†’ Features â†’ Multi-Model â†’ Fusion â†’ Regime â†’ Allocation â†’ Risk â†’ API
```

---

## ğŸ“Š Output Example

```json
{
  "date": "2026-02-20",
  "prob_up": 0.63,
  "prob_down": 0.28,
  "expected_return": 0.045,
  "volatility_estimate": 0.032,
  "regime": "Bull",
  "recommended_position": 0.72,
  "risk_score": 0.41
}
```

---

## ğŸ“‚ Project Structure

* `src/` â€” Core engine
* `configs/` â€” YAML experiment configs
* `experiments/` â€” Versioned experiment artifacts
* `backtest/` â€” Strategy evaluation
* `api/` â€” Production inference service
* `deployment/` â€” Docker & Cloud

---

## ğŸ§  Modeling Philosophy

We do NOT optimize for:

* Accuracy
* F1
* Kappa

We optimize for:

* Sharpe Ratio
* CAGR
* Max Drawdown
* Stability across regimes

---

## ğŸ”¥ Core Innovations

* Probability-based allocation (Î¼/Ïƒ framework)
* Regime-aware dynamic weighting
* Multi-timescale modeling
* Continuous position sizing

---

## ğŸ“ˆ Roadmap

### Phase 1

* Regression target upgrade
* Î¼ + Ïƒ output
* Allocation engine

### Phase 2

* PatchTST integration
* Dynamic ensemble weighting
* Regime detection module

### Phase 3

* Live deployment
* API signal streaming
* Multi-asset extension

---

## ğŸ›  Installation

```bash
git clone https://github.com/yourname/FcstLabPro
cd FcstLabPro
pip install -r requirements.txt
```

---

## ğŸ§ª Run Training

```bash
python scripts/train.py --config configs/models/lgbm.yaml
```

---

## ğŸ“Š Run Backtest

```bash
python scripts/backtest.py --config configs/portfolio/sigmoid_allocation.yaml
```

---

## ğŸš€ Run API

```bash
uvicorn src.api.app:app --reload
```

---

## ğŸ“Œ Mission

FcstLabPro is not a signal generator.

It is an AI-driven probabilistic asset allocation engine.

---

